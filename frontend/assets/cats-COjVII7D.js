import{s as T}from"./index-BeZeSF5x.js";/* empty css                   *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";import{O as q,$ as K,aD as G,aE as H,m as Q,k as W,e as X,v as Y,F as Z,I as ee,J as te,aa as ae,q as le,r as se,u as ne,E as p,_ as oe}from"./element-plus-o-j_G_-z.js";import{r as u,w as ie,j as ue,z as de,R as e,J as l,aA as re,A as f,K as pe,I as A,O as d,P as D,M as S,B as V,u as ce}from"./vue-vendor-L7KxampG.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-CCXpdI6d.js";const ve={class:"cat-manage"},ge={class:"card-header"},_e={class:"header-actions"},fe={__name:"cats",setup(Ee){re();const E=u(!1),c=u([]),g=u(""),_=u(1),C=u(10),b=u(0),m=u(!1),o=u({id:null,name:"",status:""}),B=s=>({ADOPTABLE:"success",ADOPTED:"info",OBSERVATION:"warning",TREATMENT:"danger"})[s]||"info",z=s=>({ADOPTABLE:"可领养",ADOPTED:"已领养",OBSERVATION:"观察中",TREATMENT:"治疗中"})[s]||s,v=async()=>{E.value=!0;try{const s=await T.get("/cats/page",{params:{page:_.value,pageSize:C.value,status:g.value}});s.code===200&&(c.value=s.data.records||s.data,b.value=s.data.total||c.value.length)}catch{c.value=[{id:1,name:"橘子",breed:"中华田园猫",gender:1,age:"2岁",status:"ADOPTABLE",isSterilized:1,isVaccinated:1,viewCount:156,likeCount:42},{id:2,name:"小黑",breed:"中华田园猫",gender:1,age:"1岁半",status:"ADOPTABLE",isSterilized:1,isVaccinated:1,viewCount:98,likeCount:28},{id:3,name:"花花",breed:"中华田园猫",gender:0,age:"3岁",status:"ADOPTABLE",isSterilized:1,isVaccinated:1,viewCount:87,likeCount:35},{id:4,name:"奶牛",breed:"中华田园猫",gender:1,age:"8个月",status:"ADOPTABLE",isSterilized:1,isVaccinated:1,viewCount:134,likeCount:56},{id:5,name:"咪咪",breed:"英短串",gender:0,age:"2岁",status:"ADOPTED",isSterilized:1,isVaccinated:1,viewCount:203,likeCount:78},{id:6,name:"小橘",breed:"中华田园猫",gender:1,age:"6个月",status:"OBSERVATION",isSterilized:0,isVaccinated:0,viewCount:45,likeCount:18},{id:7,name:"团团",breed:"中华田园猫",gender:0,age:"4岁",status:"TREATMENT",isSterilized:1,isVaccinated:1,viewCount:32,likeCount:12}],b.value=c.value.length}finally{E.value=!1}},P=()=>{p.info("跳转到添加猫咪页面")},x=s=>{p.info(`编辑猫咪: ${s.name}`)},N=s=>{o.value={id:s.id,name:s.name,status:s.status},m.value=!0},I=async()=>{try{await T.put(`/cats/${o.value.id}/status`,{status:o.value.status}),p.success("状态修改成功")}catch{p.success("状态修改成功（模拟）")}m.value=!1,v()},R=async s=>{try{await oe.confirm(`确定要删除猫咪 "${s.name}" 吗？`,"警告",{type:"warning"}),await T.delete(`/cats/${s.id}`),p.success("删除成功"),v()}catch(t){t!=="cancel"&&p.success("删除成功（模拟）")}};return ie(g,()=>{_.value=1,v()}),ue(()=>{v()}),(s,t)=>{const i=te,y=ee,r=X,n=H,h=Q,k=W,L=G,M=Z,$=q,U=ne,w=se,F=le,j=K,J=Y;return f(),de("div",ve,[e($,null,{header:l(()=>[V("div",ge,[t[8]||(t[8]=V("span",null,"猫咪管理",-1)),V("div",_e,[e(y,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=a=>g.value=a),placeholder:"状态筛选",clearable:"",style:{width:"120px","margin-right":"10px"}},{default:l(()=>[e(i,{label:"可领养",value:"ADOPTABLE"}),e(i,{label:"已领养",value:"ADOPTED"}),e(i,{label:"观察中",value:"OBSERVATION"}),e(i,{label:"治疗中",value:"TREATMENT"})]),_:1},8,["modelValue"]),e(r,{type:"primary",icon:ce(ae),onClick:P},{default:l(()=>[...t[7]||(t[7]=[d("添加猫咪",-1)])]),_:1},8,["icon"])])])]),default:l(()=>[pe((f(),A(L,{data:c.value,style:{width:"100%"}},{default:l(()=>[e(n,{prop:"id",label:"ID",width:"60"}),e(n,{prop:"name",label:"名称",width:"100"}),e(n,{prop:"breed",label:"品种",width:"120"}),e(n,{prop:"gender",label:"性别",width:"60"},{default:l(({row:a})=>[d(D(a.gender===1?"公":"母"),1)]),_:1}),e(n,{prop:"age",label:"年龄",width:"80"}),e(n,{prop:"status",label:"状态",width:"100"},{default:l(({row:a})=>[e(h,{type:B(a.status)},{default:l(()=>[d(D(z(a.status)),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"isSterilized",label:"绝育",width:"60"},{default:l(({row:a})=>[e(k,{color:a.isSterilized?"#67C23A":"#909399"},{default:l(()=>[(f(),A(S(a.isSterilized?"Check":"Close")))]),_:2},1032,["color"])]),_:1}),e(n,{prop:"isVaccinated",label:"疫苗",width:"60"},{default:l(({row:a})=>[e(k,{color:a.isVaccinated?"#67C23A":"#909399"},{default:l(()=>[(f(),A(S(a.isVaccinated?"Check":"Close")))]),_:2},1032,["color"])]),_:1}),e(n,{prop:"viewCount",label:"浏览",width:"70"}),e(n,{prop:"likeCount",label:"喜欢",width:"70"}),e(n,{label:"操作",fixed:"right",width:"200"},{default:l(({row:a})=>[e(r,{type:"primary",link:"",size:"small",onClick:O=>x(a)},{default:l(()=>[...t[9]||(t[9]=[d("编辑",-1)])]),_:1},8,["onClick"]),e(r,{type:"success",link:"",size:"small",onClick:O=>N(a)},{default:l(()=>[...t[10]||(t[10]=[d("改状态",-1)])]),_:1},8,["onClick"]),e(r,{type:"danger",link:"",size:"small",onClick:O=>R(a)},{default:l(()=>[...t[11]||(t[11]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,E.value]]),e(M,{"current-page":_.value,"onUpdate:currentPage":t[1]||(t[1]=a=>_.value=a),"page-size":C.value,"onUpdate:pageSize":t[2]||(t[2]=a=>C.value=a),total:b.value,layout:"total, prev, pager, next",style:{"margin-top":"20px","justify-content":"flex-end"},onCurrentChange:v},null,8,["current-page","page-size","total"])]),_:1}),e(j,{modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=a=>m.value=a),title:"修改猫咪状态",width:"400px"},{footer:l(()=>[e(r,{onClick:t[5]||(t[5]=a=>m.value=!1)},{default:l(()=>[...t[12]||(t[12]=[d("取消",-1)])]),_:1}),e(r,{type:"primary",onClick:I},{default:l(()=>[...t[13]||(t[13]=[d("确定",-1)])]),_:1})]),default:l(()=>[e(F,{model:o.value,"label-width":"80px"},{default:l(()=>[e(w,{label:"猫咪"},{default:l(()=>[e(U,{modelValue:o.value.name,"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.name=a),disabled:""},null,8,["modelValue"])]),_:1}),e(w,{label:"状态"},{default:l(()=>[e(y,{modelValue:o.value.status,"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.status=a),style:{width:"100%"}},{default:l(()=>[e(i,{label:"可领养",value:"ADOPTABLE"}),e(i,{label:"已领养",value:"ADOPTED"}),e(i,{label:"观察中",value:"OBSERVATION"}),e(i,{label:"治疗中",value:"TREATMENT"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ie=me(fe,[["__scopeId","data-v-005b551b"]]);export{Ie as default};
