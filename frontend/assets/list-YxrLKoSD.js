import"./index-k_aWam8k.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                *//* empty css                    *//* empty css                       *//* empty css                        */import{r as b,l as E,j as H,z as c,B as e,P as y,K as Q,R as l,J as o,I as x,L as B,Q as S,a6 as T,aA as W,A as d,a4 as q,u as h,O as i}from"./vue-vendor-L7KxampG.js";import{O as X,v as Y,F as Z,E as tt,H as et,u as st,e as lt,k as at,K as U,D as ot,M as nt,W as it,y as rt,I as dt,J as ut}from"./element-plus-o-j_G_-z.js";import{c as pt,a as mt,g as ct}from"./cat-CxkuW-o2.js";import{C as _t}from"./index-ol3VzvfB.js";import{_ as ft}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-CCXpdI6d.js";/* empty css                        */const gt={class:"adoption-list-page"},vt={class:"banner"},bt={class:"container"},yt={class:"banner-content"},Ct={class:"stats"},Vt={class:"stat-item"},kt={class:"number"},wt={class:"stat-item"},zt={class:"number"},Et={class:"stat-item"},xt={class:"number"},Bt={class:"container"},St={class:"filter-section"},Tt={class:"filter-content"},ht={class:"search-box"},Ut={class:"filter-row"},Ot={class:"filter-item"},jt={class:"filter-item"},At={class:"filter-item"},Lt={key:0,class:"filter-row"},Pt={class:"filter-item full-width"},Dt={class:"filter-row"},It={class:"filter-item"},Kt={class:"filter-item"},Nt={class:"cats-list"},Rt={key:1,class:"cats-grid"},$t={key:2,class:"pagination-wrapper"},Ft={__name:"list",setup(Mt){const O=W(),g=b(!1),v=E({total:0,adopted:0,applications:0}),n=E({keyword:"",gender:null,isSterilized:null,isVaccinated:null,tags:[],sortBy:"createTime",status:"ADOPTABLE"}),r=E({page:1,size:12}),C=b([]),V=b(0),k=b([]),j=async()=>{try{const s=await pt();s.code===200&&Object.assign(v,s.data)}catch(s){console.error("加载统计数据失败",s)}},A=async()=>{try{const s=await mt();if(s.code===200&&s.data){const t=s.data,u=[];Object.keys(t).forEach(_=>{Array.isArray(t[_])&&u.push(...t[_])}),k.value=u}}catch(s){console.error("加载标签列表失败",s)}},f=async()=>{g.value=!0;try{const s={page:r.page,size:r.size,...n};s.tags&&s.tags.length>0?s.tags=s.tags.join(","):delete s.tags,Object.keys(s).forEach(u=>{(s[u]===null||s[u]==="")&&delete s[u]});const t=await ct(s);t.code===200&&(C.value=t.data.records||[],V.value=t.data.total||0)}catch{tt.error("加载猫咪列表失败")}finally{g.value=!1}},m=()=>{r.page=1,f()},L=()=>{n.keyword="",n.gender=null,n.isSterilized=null,n.isVaccinated=null,n.tags=[],n.sortBy="createTime",r.page=1,f()},P=s=>{r.page=s,f(),window.scrollTo({top:0,behavior:"smooth"})},D=s=>{r.size=s,r.page=1,f()},I=s=>{O.push(`/cats/${s}`)};return H(()=>{j(),A(),f()}),(s,t)=>{const u=at,_=lt,K=st,p=nt,w=ot,N=rt,R=it,z=ut,$=dt,F=X,M=et,G=Z,J=Y;return d(),c("div",gt,[e("div",vt,[e("div",bt,[e("div",yt,[t[12]||(t[12]=e("h1",null,"等待领养的小天使",-1)),t[13]||(t[13]=e("p",null,"每一只流浪猫都值得被温柔以待，给它们一个温暖的家",-1)),e("div",Ct,[e("div",Vt,[e("span",kt,y(v.total),1),t[9]||(t[9]=e("span",{class:"label"},"等待领养",-1))]),e("div",wt,[e("span",zt,y(v.adopted),1),t[10]||(t[10]=e("span",{class:"label"},"已被领养",-1))]),e("div",Et,[e("span",xt,y(v.applications),1),t[11]||(t[11]=e("span",{class:"label"},"申请总数",-1))])])])])]),e("div",Bt,[e("div",St,[l(F,null,{default:o(()=>[e("div",Tt,[e("div",ht,[l(K,{modelValue:n.keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>n.keyword=a),placeholder:"搜索猫咪名字、品种...",clearable:"",onClear:m,onKeyup:q(m,["enter"])},{prefix:o(()=>[l(u,null,{default:o(()=>[l(h(U))]),_:1})]),append:o(()=>[l(_,{onClick:m},{default:o(()=>[l(u,null,{default:o(()=>[l(h(U))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e("div",Ut,[e("div",Ot,[t[17]||(t[17]=e("span",{class:"filter-label"},"性别：",-1)),l(w,{modelValue:n.gender,"onUpdate:modelValue":t[1]||(t[1]=a=>n.gender=a),onChange:m},{default:o(()=>[l(p,{label:null},{default:o(()=>[...t[14]||(t[14]=[i("全部",-1)])]),_:1}),l(p,{label:1},{default:o(()=>[...t[15]||(t[15]=[i("公猫",-1)])]),_:1}),l(p,{label:2},{default:o(()=>[...t[16]||(t[16]=[i("母猫",-1)])]),_:1})]),_:1},8,["modelValue"])]),e("div",jt,[t[21]||(t[21]=e("span",{class:"filter-label"},"绝育：",-1)),l(w,{modelValue:n.isSterilized,"onUpdate:modelValue":t[2]||(t[2]=a=>n.isSterilized=a),onChange:m},{default:o(()=>[l(p,{label:null},{default:o(()=>[...t[18]||(t[18]=[i("全部",-1)])]),_:1}),l(p,{label:!0},{default:o(()=>[...t[19]||(t[19]=[i("已绝育",-1)])]),_:1}),l(p,{label:!1},{default:o(()=>[...t[20]||(t[20]=[i("未绝育",-1)])]),_:1})]),_:1},8,["modelValue"])]),e("div",At,[t[25]||(t[25]=e("span",{class:"filter-label"},"疫苗：",-1)),l(w,{modelValue:n.isVaccinated,"onUpdate:modelValue":t[3]||(t[3]=a=>n.isVaccinated=a),onChange:m},{default:o(()=>[l(p,{label:null},{default:o(()=>[...t[22]||(t[22]=[i("全部",-1)])]),_:1}),l(p,{label:!0},{default:o(()=>[...t[23]||(t[23]=[i("已接种",-1)])]),_:1}),l(p,{label:!1},{default:o(()=>[...t[24]||(t[24]=[i("未接种",-1)])]),_:1})]),_:1},8,["modelValue"])])]),k.value.length>0?(d(),c("div",Lt,[e("div",Pt,[t[26]||(t[26]=e("span",{class:"filter-label"},"标签：",-1)),l(R,{modelValue:n.tags,"onUpdate:modelValue":t[4]||(t[4]=a=>n.tags=a),onChange:m},{default:o(()=>[(d(!0),c(S,null,T(k.value,a=>(d(),x(N,{key:a.id,label:a.id,border:"",size:"small"},{default:o(()=>[i(y(a.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])])):B("",!0),e("div",Dt,[e("div",It,[t[27]||(t[27]=e("span",{class:"filter-label"},"排序：",-1)),l($,{modelValue:n.sortBy,"onUpdate:modelValue":t[5]||(t[5]=a=>n.sortBy=a),onChange:m,style:{width:"200px"}},{default:o(()=>[l(z,{label:"最新发布",value:"createTime"}),l(z,{label:"浏览最多",value:"viewCount"}),l(z,{label:"收藏最多",value:"likeCount"})]),_:1},8,["modelValue"])]),e("div",Kt,[l(_,{onClick:L,plain:""},{default:o(()=>[...t[28]||(t[28]=[i("重置筛选",-1)])]),_:1})])])])]),_:1})]),Q((d(),c("div",Nt,[!g.value&&C.value.length===0?(d(),x(M,{key:0,description:"暂无可领养的猫咪"},{default:o(()=>[l(_,{type:"primary",onClick:t[6]||(t[6]=a=>s.$router.push("/rescue/publish"))},{default:o(()=>[...t[29]||(t[29]=[i(" 发布救助信息 ",-1)])]),_:1})]),_:1})):(d(),c("div",Rt,[(d(!0),c(S,null,T(C.value,a=>(d(),x(_t,{key:a.id,cat:a,onClick:Gt=>I(a.id)},null,8,["cat","onClick"]))),128))])),V.value>0?(d(),c("div",$t,[l(G,{"current-page":r.page,"onUpdate:currentPage":t[7]||(t[7]=a=>r.page=a),"page-size":r.size,"onUpdate:pageSize":t[8]||(t[8]=a=>r.size=a),total:V.value,"page-sizes":[12,24,48],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:D,onCurrentChange:P},null,8,["current-page","page-size","total"])])):B("",!0)])),[[J,g.value]])])])}}},ue=ft(Ft,[["__scopeId","data-v-f6da9372"]]);export{ue as default};
