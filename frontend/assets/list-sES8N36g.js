import"./index-C7QMbvNI.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css               *//* empty css                       *//* empty css                        *//* empty css                     */import{r as _,l as T,j as M,z as g,B as i,R as t,J as a,K as G,I as b,L as J,O as u,P as q,A as d,Q as x,a6 as A,a4 as H,u as z}from"./vue-vendor-L7KxampG.js";import{q as Q,D as W,v as X,F as Y,E as Z,G as $,H as ee,r as te,I as ae,J as le,u as oe,k as se,K as N,e as ne,L as re,M as ie,N as de}from"./element-plus-o-j_G_-z.js";import{g as ue,a as pe}from"./cat-DwVSNbqL.js";import{C as me}from"./index-cLv6ztlq.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-CCXpdI6d.js";/* empty css                        */const _e={class:"cat-list-page"},ge={class:"filter-section"},fe={class:"container"},ve={class:"cat-list-section container"},ye={class:"list-header flex-between"},be={class:"result-count"},Ee={class:"count"},Ve={key:0,class:"loading-container"},ke={key:3,class:"pagination-container"},Ce={__name:"list",setup(we){const f=_(!1),E=_([]),B=_([]),v=_(0),y=_("time"),o=T({status:"",gender:"",tags:[],keyword:""}),r=T({page:1,size:12}),m=async()=>{f.value=!0;try{const s={pageNum:r.page,pageSize:r.size,...o,sortBy:y.value};o.tags&&o.tags.length>0?s.tags=o.tags.join(","):delete s.tags;const e=await ue(s);e.code===200&&(E.value=e.data.records||e.data.list||[],v.value=e.data.total||0)}catch{Z.error("获取猫咪列表失败")}finally{f.value=!1}},S=async()=>{try{const s=await pe();if(s.code===200&&s.data){const e=s.data,n=[];Object.keys(e).forEach(p=>{Array.isArray(e[p])&&n.push(...e[p])}),B.value=n}}catch(s){console.error("获取标签列表失败",s)}},V=()=>{r.page=1,m()},L=()=>{o.status="",o.gender="",o.tags=[],o.keyword="",y.value="time",r.page=1,m()},I=s=>{r.page=s,m(),window.scrollTo({top:0,behavior:"smooth"})},O=s=>{r.size=s,r.page=1,m()};return M(()=>{m(),S()}),(s,e)=>{const n=le,p=ae,c=te,k=se,R=oe,C=ne,U=Q,w=ie,h=W,D=de,P=$,F=ee,j=Y,K=X;return d(),g("div",_e,[e[16]||(e[16]=i("div",{class:"page-header"},[i("div",{class:"container"},[i("h1",null,"猫咪列表"),i("p",null,"找到你心仪的猫咪，给它一个温暖的家")])],-1)),i("div",ge,[i("div",fe,[t(U,{inline:!0,model:o,class:"filter-form"},{default:a(()=>[t(c,{label:"状态"},{default:a(()=>[t(p,{modelValue:o.status,"onUpdate:modelValue":e[0]||(e[0]=l=>o.status=l),placeholder:"全部状态",clearable:""},{default:a(()=>[t(n,{label:"全部",value:""}),t(n,{label:"可领养",value:"ADOPTABLE"}),t(n,{label:"已领养",value:"ADOPTED"}),t(n,{label:"治疗中",value:"TREATMENT"}),t(n,{label:"观察中",value:"OBSERVATION"})]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"性别"},{default:a(()=>[t(p,{modelValue:o.gender,"onUpdate:modelValue":e[1]||(e[1]=l=>o.gender=l),placeholder:"全部性别",clearable:""},{default:a(()=>[t(n,{label:"全部",value:""}),t(n,{label:"公猫",value:1}),t(n,{label:"母猫",value:0})]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"标签"},{default:a(()=>[t(p,{modelValue:o.tags,"onUpdate:modelValue":e[2]||(e[2]=l=>o.tags=l),placeholder:"选择标签",multiple:"","collapse-tags":"",clearable:""},{default:a(()=>[(d(!0),g(x,null,A(B.value,l=>(d(),b(n,{key:l.id,label:l.name,value:l.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"搜索"},{default:a(()=>[t(R,{modelValue:o.keyword,"onUpdate:modelValue":e[3]||(e[3]=l=>o.keyword=l),placeholder:"搜索猫咪名称",clearable:"",onKeyup:H(V,["enter"])},{prefix:a(()=>[t(k,null,{default:a(()=>[t(z(N))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(c,null,{default:a(()=>[t(C,{type:"primary",onClick:V},{default:a(()=>[t(k,null,{default:a(()=>[t(z(N))]),_:1}),e[7]||(e[7]=u(" 搜索 ",-1))]),_:1}),t(C,{onClick:L},{default:a(()=>[t(k,null,{default:a(()=>[t(z(re))]),_:1}),e[8]||(e[8]=u(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])])]),i("div",ve,[i("div",ye,[i("div",be,[e[9]||(e[9]=u(" 共找到 ",-1)),i("span",Ee,q(v.value),1),e[10]||(e[10]=u(" 只猫咪 ",-1))]),t(h,{modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=l=>y.value=l),onChange:V},{default:a(()=>[t(w,{label:"time"},{default:a(()=>[...e[11]||(e[11]=[u("最新",-1)])]),_:1}),t(w,{label:"views"},{default:a(()=>[...e[12]||(e[12]=[u("最热",-1)])]),_:1}),t(w,{label:"likes"},{default:a(()=>[...e[13]||(e[13]=[u("最多喜欢",-1)])]),_:1})]),_:1},8,["modelValue"])]),f.value?G((d(),g("div",Ve,[...e[14]||(e[14]=[i("p",null,"加载中...",-1)])])),[[K,f.value]]):E.value.length>0?(d(),b(P,{key:1,gutter:24},{default:a(()=>[(d(!0),g(x,null,A(E.value,l=>(d(),b(D,{key:l.id,xs:24,sm:12,md:8,lg:6},{default:a(()=>[t(me,{cat:l,class:"mb-6"},null,8,["cat"])]),_:2},1024))),128))]),_:1})):(d(),b(F,{key:2,description:"暂无猫咪数据","image-size":200},{default:a(()=>[t(C,{type:"primary",onClick:L},{default:a(()=>[...e[15]||(e[15]=[u("重置筛选",-1)])]),_:1})]),_:1})),v.value>0?(d(),g("div",ke,[t(j,{"current-page":r.page,"onUpdate:currentPage":e[5]||(e[5]=l=>r.page=l),"page-size":r.size,"onUpdate:pageSize":e[6]||(e[6]=l=>r.size=l),total:v.value,"page-sizes":[12,24,36,48],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:I,onSizeChange:O},null,8,["current-page","page-size","total"])])):J("",!0)])])}}},Me=ce(Ce,[["__scopeId","data-v-7993e4b6"]]);export{Me as default};
