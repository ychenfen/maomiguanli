import"./index-D40KseiW.js";/* empty css                   *//* empty css               *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                *//* empty css                        *//* empty css                 *//* empty css                       *//* empty css                        */import{r as h,l as j,j as A,z as u,B as t,R as s,J as l,aA as J,A as i,O as r,u as p,K as Q,I as z,L as g,Q as W,a6 as K,E as D,P as c}from"./vue-vendor-L7KxampG.js";import{e as Z,G as q,E as X,k as tt,aa as et,N as st,D as at,M as lt,H as nt,O as ot,m as it,Q as dt,ab as ct,Z as ut,ad as rt,w as pt,B as N,F as gt,v as mt,ae as _t,g as vt}from"./element-plus-o-j_G_-z.js";import{g as ft}from"./rescue-DAFdk1R_.js";import{_ as ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-CCXpdI6d.js";const yt={class:"rescue-list-page"},Et={class:"banner"},bt={class:"container"},Ct={class:"banner-content"},kt={class:"container"},zt={class:"filter-tabs"},Mt={class:"rescue-list"},wt={key:1,class:"rescue-cards"},xt={class:"rescue-content"},Dt={key:0,class:"rescue-image"},Nt={key:0,class:"image-count"},It={class:"rescue-info"},Pt={class:"rescue-title"},Rt={class:"rescue-desc"},St={class:"rescue-meta"},Lt={class:"meta-item"},Gt={class:"meta-item"},Ot={class:"meta-item"},Tt={key:0,class:"rescue-contact"},Bt={key:2,class:"pagination-wrapper"},Vt={class:"card-header"},Ht={class:"card-header"},Ut={__name:"list",setup(Yt){const M=J(),m=h(!1),_=h(""),d=j({page:1,size:10}),y=h([]),E=h(0),v=async()=>{m.value=!0;try{const n={page:d.page,size:d.size};_.value&&(n.status=_.value);const e=await ft(n);e.code===200&&(y.value=(e.data.records||[]).map(o=>{if(o.images&&typeof o.images=="string")try{o.images=JSON.parse(o.images)}catch{o.images=[]}return o}),E.value=e.data.total||0)}catch{X.error("加载救助列表失败")}finally{m.value=!1}},I=()=>{d.page=1,v()},P=n=>{d.page=n,v(),window.scrollTo({top:0,behavior:"smooth"})},R=n=>{d.size=n,d.page=1,v()},w=()=>{M.push("/rescue/publish")},S=n=>{M.push(`/rescue/${n}`)},L=n=>({PENDING:"待救助",IN_PROGRESS:"救助中",COMPLETED:"已完成"})[n]||n,G=n=>({LOW:"一般",MEDIUM:"紧急",HIGH:"非常紧急"})[n]||n,O=n=>({LOW:"info",MEDIUM:"warning",HIGH:"danger"})[n]||"info",T=n=>n?vt(n).format("YYYY-MM-DD HH:mm"):"-";return A(()=>{v()}),(n,e)=>{const o=tt,b=Z,f=lt,B=at,V=nt,H=it,U=dt,C=ot,Y=gt,x=st,$=q,F=mt;return i(),u("div",yt,[t("div",Et,[t("div",bt,[t("div",Ct,[e[4]||(e[4]=t("h1",null,"救助信息",-1)),e[5]||(e[5]=t("p",null,"发现需要帮助的流浪猫？发布救助信息，让更多人参与进来",-1)),s(b,{type:"primary",size:"large",onClick:w},{default:l(()=>[s(o,null,{default:l(()=>[s(p(et))]),_:1}),e[3]||(e[3]=r(" 发布救助信息 ",-1))]),_:1})])])]),t("div",kt,[s($,{gutter:24},{default:l(()=>[s(x,{xs:24,lg:16},{default:l(()=>[t("div",zt,[s(B,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),onChange:I},{default:l(()=>[s(f,{label:""},{default:l(()=>[...e[6]||(e[6]=[r("全部",-1)])]),_:1}),s(f,{label:"PENDING"},{default:l(()=>[...e[7]||(e[7]=[r("待救助",-1)])]),_:1}),s(f,{label:"IN_PROGRESS"},{default:l(()=>[...e[8]||(e[8]=[r("救助中",-1)])]),_:1}),s(f,{label:"COMPLETED"},{default:l(()=>[...e[9]||(e[9]=[r("已完成",-1)])]),_:1})]),_:1},8,["modelValue"])]),Q((i(),u("div",Mt,[!m.value&&y.value.length===0?(i(),z(V,{key:0,description:"暂无救助信息"},{default:l(()=>[s(b,{type:"primary",onClick:w},{default:l(()=>[...e[10]||(e[10]=[r(" 发布救助信息 ",-1)])]),_:1})]),_:1})):(i(),u("div",wt,[(i(!0),u(W,null,K(y.value,a=>(i(),z(C,{key:a.id,class:D(["rescue-card",`status-${a.status.toLowerCase()}`]),onClick:k=>S(a.id)},{default:l(()=>{var k;return[t("div",{class:D(["status-badge",`badge-${a.status.toLowerCase()}`])},c(L(a.status)),3),a.urgency?(i(),z(H,{key:0,type:O(a.urgency),size:"small",class:"urgency-tag"},{default:l(()=>[r(c(G(a.urgency)),1)]),_:2},1032,["type"])):g("",!0),t("div",xt,[a.images&&a.images.length>0?(i(),u("div",Dt,[s(U,{src:a.images[0],fit:"cover","preview-src-list":a.images},null,8,["src","preview-src-list"]),a.images.length>1?(i(),u("div",Nt,[s(o,null,{default:l(()=>[s(p(ct))]),_:1}),r(" "+c(a.images.length),1)])):g("",!0)])):g("",!0),t("div",It,[t("h3",Pt,c(a.title),1),t("div",Rt,c(a.description),1),t("div",St,[t("div",Lt,[s(o,null,{default:l(()=>[s(p(ut))]),_:1}),t("span",null,c(a.location),1)]),t("div",Gt,[s(o,null,{default:l(()=>[s(p(rt))]),_:1}),t("span",null,c(T(a.createTime)),1)]),t("div",Ot,[s(o,null,{default:l(()=>[s(p(pt))]),_:1}),t("span",null,c((k=a.author)==null?void 0:k.username),1)])]),a.status==="PENDING"?(i(),u("div",Tt,[s(o,null,{default:l(()=>[s(p(N))]),_:1}),t("span",null,c(a.contactPhone),1)])):g("",!0)])])]}),_:2},1032,["class","onClick"]))),128))])),E.value>0?(i(),u("div",Bt,[s(Y,{"current-page":d.page,"onUpdate:currentPage":e[1]||(e[1]=a=>d.page=a),"page-size":d.size,"onUpdate:pageSize":e[2]||(e[2]=a=>d.size=a),total:E.value,"page-sizes":[10,20,30],layout:"total, sizes, prev, pager, next",onSizeChange:R,onCurrentChange:P},null,8,["current-page","page-size","total"])])):g("",!0)])),[[F,m.value]])]),_:1}),s(x,{xs:24,lg:8},{default:l(()=>[s(C,{class:"side-card guide-card"},{header:l(()=>[t("div",Vt,[s(o,null,{default:l(()=>[s(p(_t))]),_:1}),e[11]||(e[11]=t("span",null,"救助指南",-1))])]),default:l(()=>[e[12]||(e[12]=t("div",{class:"guide-content"},[t("div",{class:"guide-item"},[t("div",{class:"guide-number"},"1"),t("div",{class:"guide-text"},[t("h4",null,"评估情况"),t("p",null,"观察猫咪是否受伤、生病或处于危险中")])]),t("div",{class:"guide-item"},[t("div",{class:"guide-number"},"2"),t("div",{class:"guide-text"},[t("h4",null,"确保安全"),t("p",null,"在安全的前提下接近猫咪，避免惊吓")])]),t("div",{class:"guide-item"},[t("div",{class:"guide-number"},"3"),t("div",{class:"guide-text"},[t("h4",null,"发布信息"),t("p",null,"详细描述地点、情况，上传清晰照片")])]),t("div",{class:"guide-item"},[t("div",{class:"guide-number"},"4"),t("div",{class:"guide-text"},[t("h4",null,"联系志愿者"),t("p",null,"等待志愿者响应，提供必要协助")])]),t("div",{class:"guide-item"},[t("div",{class:"guide-number"},"5"),t("div",{class:"guide-text"},[t("h4",null,"后续跟进"),t("p",null,"及时更新救助进展，帮助猫咪恢复")])])],-1))]),_:1}),s(C,{class:"side-card contact-card"},{header:l(()=>[t("div",Ht,[s(o,null,{default:l(()=>[s(p(N))]),_:1}),e[13]||(e[13]=t("span",null,"紧急联系",-1))])]),default:l(()=>[e[14]||(e[14]=t("div",{class:"contact-list"},[t("div",{class:"contact-item"},[t("div",{class:"contact-name"},"校园流浪动物救助站"),t("div",{class:"contact-phone"},"123-4567-8890")]),t("div",{class:"contact-item"},[t("div",{class:"contact-name"},"24小时急救热线"),t("div",{class:"contact-phone"},"400-123-4567")]),t("div",{class:"contact-item"},[t("div",{class:"contact-name"},"志愿者微信群"),t("div",{class:"contact-wechat"},"扫码加入 →")])],-1))]),_:1})]),_:1})]),_:1})])])}}},oe=ht(Ut,[["__scopeId","data-v-8c358038"]]);export{oe as default};
