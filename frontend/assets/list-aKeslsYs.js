import"./index-CjZhQ3nS.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                *//* empty css                    *//* empty css                       *//* empty css                        */import{r as v,l as E,j as H,z as m,B as t,P as b,K as Q,R as l,J as o,I as x,L as B,Q as S,a6 as T,aA as W,A as d,a4 as q,u as U,O as i}from"./vue-vendor-L7KxampG.js";import{O as X,v as Y,F as Z,E as ee,H as te,u as se,e as le,k as ae,K as h,D as oe,M as ne,W as ie,y as re,I as de,J as ue}from"./element-plus-B9MrEl8w.js";import{c as pe,a as me,g as ce}from"./cat-BNSW1wqJ.js";import{C as _e}from"./index-BKVCRXr6.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-DtAJ10D1.js";/* empty css                        */const fe={class:"adoption-list-page"},ve={class:"banner"},be={class:"container"},ye={class:"banner-content"},Ce={class:"stats"},Ve={class:"stat-item"},ke={class:"number"},we={class:"stat-item"},ze={class:"number"},Ee={class:"stat-item"},xe={class:"number"},Be={class:"container"},Se={class:"filter-section"},Te={class:"filter-content"},Ue={class:"search-box"},he={class:"filter-row"},Le={class:"filter-item"},Oe={class:"filter-item"},Pe={class:"filter-item"},je={key:0,class:"filter-row"},De={class:"filter-item full-width"},Ie={class:"filter-row"},Ae={class:"filter-item"},Ke={class:"filter-item"},Ne={class:"cats-list"},Re={key:1,class:"cats-grid"},$e={key:2,class:"pagination-wrapper"},Fe={__name:"list",setup(Me){const L=W(),g=v(!1),f=E({total:0,adopted:0,applications:0}),n=E({keyword:"",gender:null,isSterilized:null,isVaccinated:null,tags:[],sortBy:"createTime",status:"ADOPTABLE"}),r=E({page:1,size:12}),y=v([]),C=v(0),V=v([]),O=async()=>{try{const s=await pe();s.code===200&&Object.assign(f,s.data)}catch(s){console.error("加载统计数据失败",s)}},P=async()=>{try{const s=await me();s.code===200&&(V.value=s.data||[])}catch(s){console.error("加载标签列表失败",s)}},_=async()=>{g.value=!0;try{const s={page:r.page,size:r.size,...n};s.tags&&s.tags.length>0?s.tags=s.tags.join(","):delete s.tags,Object.keys(s).forEach(c=>{(s[c]===null||s[c]==="")&&delete s[c]});const e=await ce(s);e.code===200&&(y.value=e.data.records||[],C.value=e.data.total||0)}catch{ee.error("加载猫咪列表失败")}finally{g.value=!1}},p=()=>{r.page=1,_()},j=()=>{n.keyword="",n.gender=null,n.isSterilized=null,n.isVaccinated=null,n.tags=[],n.sortBy="createTime",r.page=1,_()},D=s=>{r.page=s,_(),window.scrollTo({top:0,behavior:"smooth"})},I=s=>{r.size=s,r.page=1,_()},A=s=>{L.push(`/cats/${s}`)};return H(()=>{O(),P(),_()}),(s,e)=>{const c=ae,k=le,K=se,u=ne,w=oe,N=re,R=ie,z=ue,$=de,F=X,M=te,G=Z,J=Y;return d(),m("div",fe,[t("div",ve,[t("div",be,[t("div",ye,[e[12]||(e[12]=t("h1",null,"等待领养的小天使",-1)),e[13]||(e[13]=t("p",null,"每一只流浪猫都值得被温柔以待，给它们一个温暖的家",-1)),t("div",Ce,[t("div",Ve,[t("span",ke,b(f.total),1),e[9]||(e[9]=t("span",{class:"label"},"等待领养",-1))]),t("div",we,[t("span",ze,b(f.adopted),1),e[10]||(e[10]=t("span",{class:"label"},"已被领养",-1))]),t("div",Ee,[t("span",xe,b(f.applications),1),e[11]||(e[11]=t("span",{class:"label"},"申请总数",-1))])])])])]),t("div",Be,[t("div",Se,[l(F,null,{default:o(()=>[t("div",Te,[t("div",Ue,[l(K,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>n.keyword=a),placeholder:"搜索猫咪名字、品种...",clearable:"",onClear:p,onKeyup:q(p,["enter"])},{prefix:o(()=>[l(c,null,{default:o(()=>[l(U(h))]),_:1})]),append:o(()=>[l(k,{onClick:p},{default:o(()=>[l(c,null,{default:o(()=>[l(U(h))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",he,[t("div",Le,[e[17]||(e[17]=t("span",{class:"filter-label"},"性别：",-1)),l(w,{modelValue:n.gender,"onUpdate:modelValue":e[1]||(e[1]=a=>n.gender=a),onChange:p},{default:o(()=>[l(u,{label:null},{default:o(()=>[...e[14]||(e[14]=[i("全部",-1)])]),_:1}),l(u,{label:1},{default:o(()=>[...e[15]||(e[15]=[i("公猫",-1)])]),_:1}),l(u,{label:2},{default:o(()=>[...e[16]||(e[16]=[i("母猫",-1)])]),_:1})]),_:1},8,["modelValue"])]),t("div",Oe,[e[21]||(e[21]=t("span",{class:"filter-label"},"绝育：",-1)),l(w,{modelValue:n.isSterilized,"onUpdate:modelValue":e[2]||(e[2]=a=>n.isSterilized=a),onChange:p},{default:o(()=>[l(u,{label:null},{default:o(()=>[...e[18]||(e[18]=[i("全部",-1)])]),_:1}),l(u,{label:!0},{default:o(()=>[...e[19]||(e[19]=[i("已绝育",-1)])]),_:1}),l(u,{label:!1},{default:o(()=>[...e[20]||(e[20]=[i("未绝育",-1)])]),_:1})]),_:1},8,["modelValue"])]),t("div",Pe,[e[25]||(e[25]=t("span",{class:"filter-label"},"疫苗：",-1)),l(w,{modelValue:n.isVaccinated,"onUpdate:modelValue":e[3]||(e[3]=a=>n.isVaccinated=a),onChange:p},{default:o(()=>[l(u,{label:null},{default:o(()=>[...e[22]||(e[22]=[i("全部",-1)])]),_:1}),l(u,{label:!0},{default:o(()=>[...e[23]||(e[23]=[i("已接种",-1)])]),_:1}),l(u,{label:!1},{default:o(()=>[...e[24]||(e[24]=[i("未接种",-1)])]),_:1})]),_:1},8,["modelValue"])])]),V.value.length>0?(d(),m("div",je,[t("div",De,[e[26]||(e[26]=t("span",{class:"filter-label"},"标签：",-1)),l(R,{modelValue:n.tags,"onUpdate:modelValue":e[4]||(e[4]=a=>n.tags=a),onChange:p},{default:o(()=>[(d(!0),m(S,null,T(V.value,a=>(d(),x(N,{key:a.id,label:a.id,border:"",size:"small"},{default:o(()=>[i(b(a.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])])):B("",!0),t("div",Ie,[t("div",Ae,[e[27]||(e[27]=t("span",{class:"filter-label"},"排序：",-1)),l($,{modelValue:n.sortBy,"onUpdate:modelValue":e[5]||(e[5]=a=>n.sortBy=a),onChange:p,style:{width:"200px"}},{default:o(()=>[l(z,{label:"最新发布",value:"createTime"}),l(z,{label:"浏览最多",value:"viewCount"}),l(z,{label:"收藏最多",value:"likeCount"})]),_:1},8,["modelValue"])]),t("div",Ke,[l(k,{onClick:j,plain:""},{default:o(()=>[...e[28]||(e[28]=[i("重置筛选",-1)])]),_:1})])])])]),_:1})]),Q((d(),m("div",Ne,[!g.value&&y.value.length===0?(d(),x(M,{key:0,description:"暂无可领养的猫咪"},{default:o(()=>[l(k,{type:"primary",onClick:e[6]||(e[6]=a=>s.$router.push("/rescue/publish"))},{default:o(()=>[...e[29]||(e[29]=[i(" 发布救助信息 ",-1)])]),_:1})]),_:1})):(d(),m("div",Re,[(d(!0),m(S,null,T(y.value,a=>(d(),x(_e,{key:a.id,cat:a,onClick:Ge=>A(a.id)},null,8,["cat","onClick"]))),128))])),C.value>0?(d(),m("div",$e,[l(G,{"current-page":r.page,"onUpdate:currentPage":e[7]||(e[7]=a=>r.page=a),"page-size":r.size,"onUpdate:pageSize":e[8]||(e[8]=a=>r.size=a),total:C.value,"page-sizes":[12,24,48],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:I,onCurrentChange:D},null,8,["current-page","page-size","total"])])):B("",!0)])),[[J,g.value]])])])}}},ut=ge(Fe,[["__scopeId","data-v-8e9f7e2d"]]);export{ut as default};
