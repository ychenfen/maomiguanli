import"./index-D40KseiW.js";/* empty css                   *//* empty css               *//* empty css                     *//* empty css                    *//* empty css                 *//* empty css                *//* empty css                             *//* empty css               *//* empty css                        */import{r as g,l as L,j as N,z as B,B as a,R as e,J as t,aB as M,aA as O,A as I,O as n,u as v,K as j,P as u}from"./vue-vendor-L7KxampG.js";import{e as $,G,E as p,k as J,P as K,N as Q,O as X,Q as Y,T as Z,U as H,m as W,v as ee,X as le,Y as te,q as ae,r as oe,u as se,B as re,Z as ne,y as ie,_ as de}from"./element-plus-o-j_G_-z.js";import{b as ue}from"./cat-B7UR_3So.js";import{a as pe}from"./adoption-eug5KJCB.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-CCXpdI6d.js";const me={class:"adoption-apply-page"},_e={class:"container"},fe={class:"back-btn"},ge={class:"cat-info"},ve={class:"cat-image"},ye={class:"cat-details mt-4"},be={class:"card-header"},xe={class:"tips-content"},he={class:"note"},we={__name:"apply",setup(Ve){const q=M(),c=O(),b=g(!0),x=g(!1),o=g({}),y=g(!1),V=g(null),s=L({reason:"",livingCondition:"",experience:"",contactPhone:"",contactAddress:""}),A={reason:[{required:!0,message:"请填写领养理由",trigger:"blur"},{min:20,message:"请至少输入20个字",trigger:"blur"}],livingCondition:[{required:!0,message:"请说明您的居住条件",trigger:"blur"},{min:20,message:"请至少输入20个字",trigger:"blur"}],experience:[{required:!0,message:"请说明您的养猫经验",trigger:"blur"},{min:20,message:"请至少输入20个字",trigger:"blur"}],contactPhone:[{required:!0,validator:(m,l,i)=>{l?/^1[3-9]\d{9}$/.test(l)?i():i(new Error("请输入正确的手机号码")):i(new Error("请输入联系电话"))},trigger:"blur"}],contactAddress:[{required:!0,message:"请输入联系地址",trigger:"blur"}]},P=async()=>{const m=q.params.catId;if(!m){p.error("缺少猫咪ID"),c.push("/cats");return}b.value=!0;try{const l=await ue(m);l.code===200?(o.value=l.data,o.value.status!=="ADOPTABLE"&&(p.warning("该猫咪暂不可领养"),setTimeout(()=>{c.push(`/cats/${m}`)},1500))):(p.error("获取猫咪信息失败"),c.push("/cats"))}catch{p.error("获取猫咪信息失败"),c.push("/cats")}finally{b.value=!1}},k=()=>{c.back()},T=async()=>{if(!y.value){p.warning("请先阅读并同意领养须知");return}if(await V.value.validate().catch(()=>!1)){try{await de.confirm("确定要提交领养申请吗？我们会尽快审核您的申请。","提交确认",{confirmButtonText:"确定提交",cancelButtonText:"再想想",type:"info"})}catch{return}x.value=!0;try{(await pe({catId:o.value.id,...s})).code===200&&(p.success("申请提交成功，请等待审核"),setTimeout(()=>{c.push("/adoption/my")},1500))}catch(l){p.error(l.message||"提交申请失败")}finally{x.value=!1}}};return N(()=>{P()}),(m,l)=>{const i=J,E=$,z=Y,_=H,h=W,D=Z,w=X,C=Q,f=se,d=oe,R=ie,U=ae,F=G,S=ee;return I(),B("div",me,[a("div",_e,[a("div",fe,[e(E,{onClick:k},{default:t(()=>[e(i,null,{default:t(()=>[e(v(K))]),_:1}),l[6]||(l[6]=n(" 返回 ",-1))]),_:1})]),e(F,{gutter:32},{default:t(()=>[e(C,{xs:24,md:10},{default:t(()=>[e(w,{class:"cat-info-card"},{header:t(()=>[...l[7]||(l[7]=[a("div",{class:"card-header"},[a("span",null,"领养猫咪信息")],-1)])]),default:t(()=>[j((I(),B("div",ge,[a("div",ve,[e(z,{src:o.value.coverImage||"/placeholder-cat.jpg",fit:"cover",alt:o.value.name},null,8,["src","alt"])]),a("div",ye,[a("h2",null,u(o.value.name),1),e(D,{column:1,border:"",class:"mt-3"},{default:t(()=>[e(_,{label:"品种"},{default:t(()=>[n(u(o.value.breed||"中华田园猫"),1)]),_:1}),e(_,{label:"性别"},{default:t(()=>[e(h,{type:o.value.gender===1?"primary":"danger",size:"small"},{default:t(()=>[n(u(o.value.gender===1?"公":"母"),1)]),_:1},8,["type"])]),_:1}),e(_,{label:"年龄"},{default:t(()=>[n(u(o.value.age||"未知"),1)]),_:1}),e(_,{label:"健康状况"},{default:t(()=>[n(u(o.value.healthStatus||"健康"),1)]),_:1}),e(_,{label:"是否绝育"},{default:t(()=>[e(h,{type:o.value.isSterilized?"success":"info",size:"small"},{default:t(()=>[n(u(o.value.isSterilized?"已绝育":"未绝育"),1)]),_:1},8,["type"])]),_:1}),e(_,{label:"是否疫苗"},{default:t(()=>[e(h,{type:o.value.isVaccinated?"success":"info",size:"small"},{default:t(()=>[n(u(o.value.isVaccinated?"已接种":"未接种"),1)]),_:1},8,["type"])]),_:1})]),_:1})])])),[[S,b.value]])]),_:1}),e(w,{class:"mt-4 tips-card"},{header:t(()=>[a("div",be,[e(i,{color:"#E6A23C"},{default:t(()=>[e(v(te))]),_:1}),l[8]||(l[8]=a("span",null,"领养须知",-1))])]),default:t(()=>[a("div",xe,[l[10]||(l[10]=a("p",null,[a("strong",null,"领养前请仔细阅读以下内容：")],-1)),l[11]||(l[11]=a("ul",null,[a("li",null,"确保您有足够的时间和精力照顾猫咪"),a("li",null,"确保您的居住条件允许饲养宠物"),a("li",null,"定期为猫咪接种疫苗和体检"),a("li",null,"提供充足的食物、水和清洁的生活环境"),a("li",null,"不得遗弃或虐待猫咪"),a("li",null,"如无法继续饲养，请联系我们重新安置")],-1)),a("p",he,[e(i,null,{default:t(()=>[e(v(le))]),_:1}),l[9]||(l[9]=n(" 我们会对您的申请进行审核，请耐心等待 ",-1))])])]),_:1})]),_:1}),e(C,{xs:24,md:14},{default:t(()=>[e(w,{class:"apply-form-card"},{header:t(()=>[...l[12]||(l[12]=[a("div",{class:"card-header"},[a("span",null,"填写领养申请")],-1)])]),default:t(()=>[e(U,{ref_key:"applyFormRef",ref:V,model:s,rules:A,"label-width":"120px","label-position":"top"},{default:t(()=>[e(d,{label:"领养理由",prop:"reason",required:""},{default:t(()=>[e(f,{modelValue:s.reason,"onUpdate:modelValue":l[0]||(l[0]=r=>s.reason=r),type:"textarea",rows:4,placeholder:"请详细说明您为什么想领养这只猫咪",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(d,{label:"居住条件说明",prop:"livingCondition",required:""},{default:t(()=>[e(f,{modelValue:s.livingCondition,"onUpdate:modelValue":l[1]||(l[1]=r=>s.livingCondition=r),type:"textarea",rows:4,placeholder:"请描述您的居住条件，如：独居/合租、是否允许养宠物、住房面积等",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(d,{label:"养猫经验",prop:"experience",required:""},{default:t(()=>[e(f,{modelValue:s.experience,"onUpdate:modelValue":l[2]||(l[2]=r=>s.experience=r),type:"textarea",rows:4,placeholder:"请说明您的养猫经验，如果是第一次养猫，请说明您为此做了哪些准备",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(d,{label:"联系电话",prop:"contactPhone",required:""},{default:t(()=>[e(f,{modelValue:s.contactPhone,"onUpdate:modelValue":l[3]||(l[3]=r=>s.contactPhone=r),placeholder:"请输入您的联系电话",maxlength:"20"},{prefix:t(()=>[e(i,null,{default:t(()=>[e(v(re))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"联系地址",prop:"contactAddress",required:""},{default:t(()=>[e(f,{modelValue:s.contactAddress,"onUpdate:modelValue":l[4]||(l[4]=r=>s.contactAddress=r),placeholder:"请输入您的详细地址",maxlength:"200"},{prefix:t(()=>[e(i,null,{default:t(()=>[e(v(ne))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(R,{modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=r=>y.value=r)},{default:t(()=>[...l[13]||(l[13]=[n(" 我已阅读并同意遵守以上领养须知 ",-1)])]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(E,{type:"primary",size:"large",loading:x.value,disabled:!y.value,onClick:T,style:{width:"100%"}},{default:t(()=>[...l[14]||(l[14]=[n(" 提交申请 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])])}}},Me=ce(we,[["__scopeId","data-v-0518c228"]]);export{Me as default};
