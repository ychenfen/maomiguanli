import"./index-B2-6bV7b.js";/* empty css                   *//* empty css                 *//* empty css                *//* empty css               *//* empty css                             *//* empty css               *//* empty css                        */import{r as b,c as I,j as H,K as J,z as u,I as g,L as d,B as s,R as t,J as a,aB as K,aA as U,A as i,O as n,u as E,E as B,P as l,Q as L,a6 as z,M as x}from"./vue-vendor-L7KxampG.js";import{v as q,e as W,G as X,E as _,O as Y,H as Z,k as ee,P as te,N as ae,Q as se,R as le,S as oe,T as ie,U as ne,m as ue,V as ce}from"./element-plus-o-j_G_-z.js";import{b as re,u as de,l as ve}from"./cat-Bh7QlOGh.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-CCXpdI6d.js";const me={class:"cat-detail-page"},pe={key:0,class:"container"},fe={class:"back-btn"},ge={class:"image-section"},ye={class:"main-image"},he={class:"image-loading"},ke={key:0,class:"thumbnail-list"},Ce=["onClick"],be={class:"info-section"},Ee={class:"cat-name"},De={class:"cat-stats"},we={class:"stat-item"},Ie={class:"stat-item"},Se={key:0,class:"tag-section mt-4"},Te={class:"tags"},Ae={class:"action-buttons mt-6"},Be={class:"description-section"},Le={key:0,class:"desc-item"},ze={key:1,class:"desc-item"},xe={key:2,class:"desc-item"},Oe={__name:"detail",setup(Ve){const O=K(),D=U(),m=b(!0),e=b({}),r=b(!1),y=b(0),p=I(()=>e.value.images&&e.value.images.length>0?e.value.images:e.value.coverImage?[e.value.coverImage]:["/placeholder-cat.jpg"]),V=I(()=>p.value[y.value]||p.value[0]),N=I(()=>({ADOPTABLE:"可领养",ADOPTED:"已领养",TREATMENT:"治疗中",OBSERVATION:"观察中"})[e.value.status]||"未知"),R=async()=>{const f=O.params.id;if(!f){_.error("缺少猫咪ID"),D.push("/cats");return}m.value=!0;try{const o=await re(f);o.code===200?e.value=o.data:_.error("获取猫咪详情失败")}catch{_.error("获取猫咪详情失败")}finally{m.value=!1}},S=()=>{D.back()},P=()=>{D.push(`/adoption/apply/${e.value.id}`)},M=async()=>{try{r.value?(await de(e.value.id),r.value=!1,e.value.likeCount>0&&e.value.likeCount--,_.success("已取消喜欢")):(await ve(e.value.id),r.value=!0,e.value.likeCount=(e.value.likeCount||0)+1,_.success("已添加到喜欢"))}catch{_.error("操作失败")}};return H(()=>{R()}),(f,o)=>{const v=ee,h=W,T=se,A=ae,c=ne,k=ue,F=ie,$=X,j=Y,Q=Z,G=q;return J((i(),u("div",me,[!m.value&&e.value.id?(i(),u("div",pe,[s("div",fe,[t(h,{onClick:S},{default:a(()=>[t(v,null,{default:a(()=>[t(E(te))]),_:1}),o[0]||(o[0]=n(" 返回列表 ",-1))]),_:1})]),t($,{gutter:32},{default:a(()=>[t(A,{xs:24,md:12},{default:a(()=>[s("div",ge,[s("div",ye,[t(T,{src:V.value,fit:"cover","preview-src-list":p.value,"initial-index":y.value},{placeholder:a(()=>[s("div",he,[t(v,{class:"is-loading"},{default:a(()=>[t(E(le))]),_:1})])]),_:1},8,["src","preview-src-list","initial-index"]),s("div",{class:B(["status-badge",`status-${e.value.status.toLowerCase()}`])},l(N.value),3)]),p.value.length>1?(i(),u("div",ke,[(i(!0),u(L,null,z(p.value,(C,w)=>(i(),u("div",{key:w,class:B(["thumbnail-item",{active:w===y.value}]),onClick:Ne=>y.value=w},[t(T,{src:C,fit:"cover"},null,8,["src"])],10,Ce))),128))])):d("",!0)])]),_:1}),t(A,{xs:24,md:12},{default:a(()=>[s("div",be,[s("h1",Ee,l(e.value.name),1),s("div",De,[s("div",we,[t(v,null,{default:a(()=>[t(E(oe))]),_:1}),s("span",null,l(e.value.viewCount||0)+" 浏览",1)]),s("div",Ie,[t(v,{color:r.value?"#f56c6c":""},{default:a(()=>[(i(),g(x(r.value?"StarFilled":"Star")))]),_:1},8,["color"]),s("span",null,l(e.value.likeCount||0)+" 喜欢",1)])]),t(F,{column:2,border:"",class:"mt-4"},{default:a(()=>[t(c,{label:"品种"},{default:a(()=>[n(l(e.value.breed||"中华田园猫"),1)]),_:1}),t(c,{label:"性别"},{default:a(()=>[t(k,{type:e.value.gender===1?"primary":"danger",size:"small"},{default:a(()=>[n(l(e.value.gender===1?"公":"母"),1)]),_:1},8,["type"])]),_:1}),t(c,{label:"年龄"},{default:a(()=>[n(l(e.value.age||"未知"),1)]),_:1}),t(c,{label:"毛色"},{default:a(()=>[n(l(e.value.color||"未知"),1)]),_:1}),t(c,{label:"是否绝育"},{default:a(()=>[t(k,{type:e.value.isSterilized?"success":"info",size:"small"},{default:a(()=>[n(l(e.value.isSterilized?"已绝育":"未绝育"),1)]),_:1},8,["type"])]),_:1}),t(c,{label:"是否疫苗"},{default:a(()=>[t(k,{type:e.value.isVaccinated?"success":"info",size:"small"},{default:a(()=>[n(l(e.value.isVaccinated?"已接种":"未接种"),1)]),_:1},8,["type"])]),_:1}),t(c,{label:"健康状况",span:2},{default:a(()=>[n(l(e.value.healthStatus||"健康"),1)]),_:1}),t(c,{label:"救助地点",span:2},{default:a(()=>[n(l(e.value.rescueLocation||"未知"),1)]),_:1}),t(c,{label:"救助日期",span:2},{default:a(()=>[n(l(e.value.rescueDate||"未知"),1)]),_:1})]),_:1}),e.value.tags&&e.value.tags.length?(i(),u("div",Se,[o[1]||(o[1]=s("div",{class:"section-title"},"标签",-1)),s("div",Te,[(i(!0),u(L,null,z(e.value.tags,C=>(i(),g(k,{key:C,type:"info",effect:"plain"},{default:a(()=>[n(l(C),1)]),_:2},1024))),128))])])):d("",!0),s("div",Ae,[t(h,{type:"primary",size:"large",disabled:e.value.status!=="ADOPTABLE",onClick:P},{default:a(()=>[t(v,null,{default:a(()=>[t(E(ce))]),_:1}),n(" "+l(e.value.status==="ADOPTABLE"?"申请领养":"暂不可领养"),1)]),_:1},8,["disabled"]),t(h,{size:"large",onClick:M},{default:a(()=>[t(v,{color:r.value?"#f56c6c":""},{default:a(()=>[(i(),g(x(r.value?"StarFilled":"Star")))]),_:1},8,["color"]),n(" "+l(r.value?"取消喜欢":"喜欢"),1)]),_:1})])])]),_:1})]),_:1}),e.value.description||e.value.rescueStory?(i(),g(j,{key:0,class:"mt-6"},{header:a(()=>[...o[2]||(o[2]=[s("div",{class:"card-header"},[s("span",null,"详细介绍")],-1)])]),default:a(()=>[s("div",Be,[e.value.description?(i(),u("div",Le,[o[3]||(o[3]=s("h3",null,"猫咪描述",-1)),s("p",null,l(e.value.description),1)])):d("",!0),e.value.rescueStory?(i(),u("div",ze,[o[4]||(o[4]=s("h3",null,"救助故事",-1)),s("p",null,l(e.value.rescueStory),1)])):d("",!0),e.value.character?(i(),u("div",xe,[o[5]||(o[5]=s("h3",null,"性格特点",-1)),s("p",null,l(e.value.character),1)])):d("",!0)])]),_:1})):d("",!0)])):!m.value&&!e.value.id?(i(),g(Q,{key:1,description:"猫咪信息不存在","image-size":200},{default:a(()=>[t(h,{type:"primary",onClick:S},{default:a(()=>[...o[6]||(o[6]=[n("返回列表",-1)])]),_:1})]),_:1})):d("",!0)])),[[G,m.value]])}}},We=_e(Oe,[["__scopeId","data-v-fe6c6826"]]);export{We as default};
