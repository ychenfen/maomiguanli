import{_ as Q}from"./index-59OIMCbR.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                *//* empty css                       *//* empty css                        */import{r as y,l as k,o as G,B as c,E as e,R as E,M as W,C as l,D as n,y as S,O as I,K as U,a5 as x,az as Y,z as u,am as q,u as T,Q as d}from"./vue-vendor-UlW9XFxV.js";import{Y as H,y as J,Q as X,E as Z,m as tt,I as et,e as st,l as lt,U as O,P as at,W as ot,S as nt,T as it}from"./element-plus-5e6ZgU0u.js";import{c as dt,a as rt,g as ut}from"./cat-CoDgQuJ0.js";import{C as pt}from"./index-BCm8nuFM.js";import"./utils-Yxd-MeZx.js";/* empty css                        */import"./favorites-RBzN3m0r.js";const mt={class:"adoption-list-page"},ct={class:"banner"},_t={class:"container"},ft={class:"banner-content"},gt={class:"stats"},vt={class:"stat-item"},bt={class:"number"},yt={class:"stat-item"},Ct={class:"number"},Vt={class:"stat-item"},wt={class:"number"},zt={class:"container"},kt={class:"filter-section"},Et={class:"filter-content"},St={class:"search-box"},Bt={class:"filter-row"},It={class:"filter-item"},Ut={class:"filter-item"},xt={class:"filter-item"},Tt={key:0,class:"filter-row"},Ot={class:"filter-item full-width"},Pt={class:"filter-row"},ht={class:"filter-item"},Dt={class:"filter-item"},Lt={class:"cats-list"},Nt={key:1,class:"cats-grid"},At={key:2,class:"pagination-wrapper"},Rt={__name:"list",setup($t){const P=Y(),v=y(!1),_=k({total:0,adopted:0,applications:0}),a=k({keyword:"",gender:null,isSterilized:null,isVaccinated:null,tagId:null,sortBy:"create_time",status:"ADOPTABLE"}),i=k({page:1,size:12}),C=y([]),V=y(0),w=y([]),h=async()=>{try{const s=await dt();s.code===200&&(_.total=s.data.adoptableCount||0,_.adopted=s.data.adoptedCount||0,_.applications=0)}catch(s){console.error("加载统计数据失败",s)}},D=async()=>{try{const s=await rt();if(s.code===200&&s.data){const t=s.data,r=[];Object.keys(t).forEach(f=>{Array.isArray(t[f])&&r.push(...t[f])}),w.value=r}}catch(s){console.error("加载标签列表失败",s)}},g=async()=>{v.value=!0;try{const s={pageNum:i.page,pageSize:i.size,keyword:a.keyword||void 0,gender:a.gender,isSterilized:a.isSterilized,isVaccinated:a.isVaccinated,tagId:a.tagId||void 0,status:a.status,sortBy:a.sortBy,sortOrder:"desc"};Object.keys(s).forEach(r=>{(s[r]===null||s[r]===""||typeof s[r]>"u")&&delete s[r]});const t=await ut(s);t.code===200&&(C.value=t.data.records||[],V.value=t.data.total||0)}catch{Z.error("加载猫咪列表失败")}finally{v.value=!1}},m=()=>{i.page=1,g()},L=()=>{a.keyword="",a.gender=null,a.isSterilized=null,a.isVaccinated=null,a.tagId=null,a.sortBy="create_time",i.page=1,g()},N=s=>{i.page=s,g(),window.scrollTo({top:0,behavior:"smooth"})},A=s=>{i.size=s,i.page=1,g()},R=s=>{P.push(`/cats/${s}`)};return G(()=>{h(),D(),g()}),(s,t)=>{const r=lt,f=st,$=et,p=ot,z=at,b=it,B=nt,j=H,K=tt,M=X,F=J;return u(),c("div",mt,[e("div",ct,[e("div",_t,[e("div",ft,[t[12]||(t[12]=e("h1",null,"等待领养的小天使",-1)),t[13]||(t[13]=e("p",null,"每一只流浪猫都值得被温柔以待，给它们一个温暖的家",-1)),e("div",gt,[e("div",vt,[e("span",bt,E(_.total),1),t[9]||(t[9]=e("span",{class:"label"},"等待领养",-1))]),e("div",yt,[e("span",Ct,E(_.adopted),1),t[10]||(t[10]=e("span",{class:"label"},"已被领养",-1))]),e("div",Vt,[e("span",wt,E(_.applications),1),t[11]||(t[11]=e("span",{class:"label"},"申请总数",-1))])])])])]),e("div",zt,[e("div",kt,[l(j,null,{default:n(()=>[e("div",Et,[e("div",St,[l($,{modelValue:a.keyword,"onUpdate:modelValue":t[0]||(t[0]=o=>a.keyword=o),placeholder:"搜索猫咪名字、品种...",clearable:"",onClear:m,onKeyup:q(m,["enter"])},{prefix:n(()=>[l(r,null,{default:n(()=>[l(T(O))]),_:1})]),append:n(()=>[l(f,{onClick:m},{default:n(()=>[l(r,null,{default:n(()=>[l(T(O))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e("div",Bt,[e("div",It,[t[17]||(t[17]=e("span",{class:"filter-label"},"性别：",-1)),l(z,{modelValue:a.gender,"onUpdate:modelValue":t[1]||(t[1]=o=>a.gender=o),onChange:m},{default:n(()=>[l(p,{label:null},{default:n(()=>[...t[14]||(t[14]=[d("全部",-1)])]),_:1}),l(p,{label:1},{default:n(()=>[...t[15]||(t[15]=[d("公猫",-1)])]),_:1}),l(p,{label:0},{default:n(()=>[...t[16]||(t[16]=[d("母猫",-1)])]),_:1})]),_:1},8,["modelValue"])]),e("div",Ut,[t[21]||(t[21]=e("span",{class:"filter-label"},"绝育：",-1)),l(z,{modelValue:a.isSterilized,"onUpdate:modelValue":t[2]||(t[2]=o=>a.isSterilized=o),onChange:m},{default:n(()=>[l(p,{label:null},{default:n(()=>[...t[18]||(t[18]=[d("全部",-1)])]),_:1}),l(p,{label:1},{default:n(()=>[...t[19]||(t[19]=[d("已绝育",-1)])]),_:1}),l(p,{label:0},{default:n(()=>[...t[20]||(t[20]=[d("未绝育",-1)])]),_:1})]),_:1},8,["modelValue"])]),e("div",xt,[t[25]||(t[25]=e("span",{class:"filter-label"},"疫苗：",-1)),l(z,{modelValue:a.isVaccinated,"onUpdate:modelValue":t[3]||(t[3]=o=>a.isVaccinated=o),onChange:m},{default:n(()=>[l(p,{label:null},{default:n(()=>[...t[22]||(t[22]=[d("全部",-1)])]),_:1}),l(p,{label:1},{default:n(()=>[...t[23]||(t[23]=[d("已接种",-1)])]),_:1}),l(p,{label:0},{default:n(()=>[...t[24]||(t[24]=[d("未接种",-1)])]),_:1})]),_:1},8,["modelValue"])])]),w.value.length>0?(u(),c("div",Tt,[e("div",Ot,[t[26]||(t[26]=e("span",{class:"filter-label"},"标签：",-1)),l(B,{modelValue:a.tagId,"onUpdate:modelValue":t[4]||(t[4]=o=>a.tagId=o),placeholder:"选择标签",clearable:"",onChange:m},{default:n(()=>[(u(!0),c(U,null,x(w.value,o=>(u(),S(b,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):I("",!0),e("div",Pt,[e("div",ht,[t[27]||(t[27]=e("span",{class:"filter-label"},"排序：",-1)),l(B,{modelValue:a.sortBy,"onUpdate:modelValue":t[5]||(t[5]=o=>a.sortBy=o),onChange:m,style:{width:"200px"}},{default:n(()=>[l(b,{label:"最新发布",value:"create_time"}),l(b,{label:"浏览最多",value:"view_count"}),l(b,{label:"收藏最多",value:"like_count"})]),_:1},8,["modelValue"])]),e("div",Dt,[l(f,{onClick:L,plain:""},{default:n(()=>[...t[28]||(t[28]=[d("重置筛选",-1)])]),_:1})])])])]),_:1})]),W((u(),c("div",Lt,[!v.value&&C.value.length===0?(u(),S(K,{key:0,description:"暂无可领养的猫咪"},{default:n(()=>[l(f,{type:"primary",onClick:t[6]||(t[6]=o=>s.$router.push("/rescue/publish"))},{default:n(()=>[...t[29]||(t[29]=[d(" 发布救助信息 ",-1)])]),_:1})]),_:1})):(u(),c("div",Nt,[(u(!0),c(U,null,x(C.value,o=>(u(),S(pt,{key:o.id,cat:o,onClick:jt=>R(o.id)},null,8,["cat","onClick"]))),128))])),V.value>0?(u(),c("div",At,[l(M,{"current-page":i.page,"onUpdate:currentPage":t[7]||(t[7]=o=>i.page=o),"page-size":i.size,"onUpdate:pageSize":t[8]||(t[8]=o=>i.size=o),total:V.value,"page-sizes":[12,24,48],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:A,onCurrentChange:N},null,8,["current-page","page-size","total"])])):I("",!0)])),[[F,v.value]])])])}}},ae=Q(Rt,[["__scopeId","data-v-02c447e4"]]);export{ae as default};
