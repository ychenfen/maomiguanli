import{_ as X}from"./index-59OIMCbR.js";/* empty css                   *//* empty css                *//* empty css               *//* empty css                             *//* empty css               *//* empty css                        */import{r as b,c as B,o as Y,M as Z,B as r,y as h,O as _,E as s,C as a,D as t,aA as q,az as H,z as i,Q as u,u as E,G as z,R as l,K as A,a5 as L,P as x}from"./vue-vendor-UlW9XFxV.js";import{y as J,e as U,R as W,E as p,Y as ee,m as ae,l as te,Z as se,X as le,_ as oe,$ as ie,a0 as ue,a1 as ne,a2 as re,B as ce,a3 as de}from"./element-plus-5e6ZgU0u.js";import{b as ve,u as _e,l as me}from"./cat-CoDgQuJ0.js";import{i as pe,s as O}from"./favorites-RBzN3m0r.js";import"./utils-Yxd-MeZx.js";const fe={class:"cat-detail-page"},ge={key:0,class:"container"},ye={class:"back-btn"},he={class:"image-section"},ke={class:"main-image"},Ce={class:"image-loading"},be={key:0,class:"thumbnail-list"},Ee=["onClick"],De={class:"info-section"},we={class:"cat-name"},Be={class:"cat-stats"},Ie={class:"stat-item"},Se={class:"stat-item"},Te={key:0,class:"tag-section mt-4"},ze={class:"tags"},Ae={class:"action-buttons mt-6"},Le={class:"description-section"},xe={key:0,class:"desc-item"},Oe={key:1,class:"desc-item"},Re={key:2,class:"desc-item"},Ve={__name:"detail",setup(Ne){const R=q(),D=H(),f=b(!0),e=b({}),c=b(!1),k=b(0),g=B(()=>e.value.images&&e.value.images.length>0?e.value.images:e.value.coverImage?[e.value.coverImage]:["/placeholder-cat.jpg"]),V=B(()=>g.value[k.value]||g.value[0]),N=B(()=>({ADOPTABLE:"可领养",ADOPTED:"已领养",TREATMENT:"治疗中",OBSERVATION:"观察中"})[e.value.status]||"未知"),F=async()=>{var o,d;const y=R.params.id;if(!y){p.error("缺少猫咪ID"),D.push("/cats");return}f.value=!0;try{const n=await ve(y);n.code===200?(e.value=n.data,c.value=!!((o=n.data)!=null&&o.isLiked)||pe((d=n.data)==null?void 0:d.id)):p.error("获取猫咪详情失败")}catch{p.error("获取猫咪详情失败")}finally{f.value=!1}},I=()=>{D.back()},P=()=>{D.push(`/adoption/apply/${e.value.id}`)},M=async()=>{try{c.value?(await _e(e.value.id),c.value=!1,O(e.value.id,!1),e.value.likeCount>0&&e.value.likeCount--,p.success("已取消喜欢")):(await me(e.value.id),c.value=!0,O(e.value.id,!0),e.value.likeCount=(e.value.likeCount||0)+1,p.success("已添加到喜欢"))}catch{p.error("操作失败")}};return Y(()=>{F()}),(y,o)=>{const d=te,n=U,S=oe,T=le,v=re,C=ce,$=ne,j=W,G=ee,K=ae,Q=J;return Z((i(),r("div",fe,[!f.value&&e.value.id?(i(),r("div",ge,[s("div",ye,[a(n,{onClick:I},{default:t(()=>[a(d,null,{default:t(()=>[a(E(se))]),_:1}),o[0]||(o[0]=u(" 返回列表 ",-1))]),_:1})]),a(j,{gutter:32},{default:t(()=>[a(T,{xs:24,md:12},{default:t(()=>[s("div",he,[s("div",ke,[a(S,{src:V.value,fit:"cover","preview-src-list":g.value,"initial-index":k.value},{placeholder:t(()=>[s("div",Ce,[a(d,{class:"is-loading"},{default:t(()=>[a(E(ie))]),_:1})])]),_:1},8,["src","preview-src-list","initial-index"]),s("div",{class:z(["status-badge",`status-${e.value.status.toLowerCase()}`])},l(N.value),3)]),g.value.length>1?(i(),r("div",be,[(i(!0),r(A,null,L(g.value,(m,w)=>(i(),r("div",{key:w,class:z(["thumbnail-item",{active:w===k.value}]),onClick:Fe=>k.value=w},[a(S,{src:m,fit:"cover"},null,8,["src"])],10,Ee))),128))])):_("",!0)])]),_:1}),a(T,{xs:24,md:12},{default:t(()=>[s("div",De,[s("h1",we,l(e.value.name),1),s("div",Be,[s("div",Ie,[a(d,null,{default:t(()=>[a(E(ue))]),_:1}),s("span",null,l(e.value.viewCount||0)+" 浏览",1)]),s("div",Se,[a(d,{color:c.value?"#f56c6c":""},{default:t(()=>[(i(),h(x(c.value?"StarFilled":"Star")))]),_:1},8,["color"]),s("span",null,l(e.value.likeCount||0)+" 喜欢",1)])]),a($,{column:2,border:"",class:"mt-4"},{default:t(()=>[a(v,{label:"品种"},{default:t(()=>[u(l(e.value.breed||"中华田园猫"),1)]),_:1}),a(v,{label:"性别"},{default:t(()=>[a(C,{type:e.value.gender===1?"primary":"danger",size:"small"},{default:t(()=>[u(l(e.value.gender===1?"公":"母"),1)]),_:1},8,["type"])]),_:1}),a(v,{label:"年龄"},{default:t(()=>[u(l(e.value.age||"未知"),1)]),_:1}),a(v,{label:"毛色"},{default:t(()=>[u(l(e.value.color||"未知"),1)]),_:1}),a(v,{label:"是否绝育"},{default:t(()=>[a(C,{type:e.value.isSterilized?"success":"info",size:"small"},{default:t(()=>[u(l(e.value.isSterilized?"已绝育":"未绝育"),1)]),_:1},8,["type"])]),_:1}),a(v,{label:"是否疫苗"},{default:t(()=>[a(C,{type:e.value.isVaccinated?"success":"info",size:"small"},{default:t(()=>[u(l(e.value.isVaccinated?"已接种":"未接种"),1)]),_:1},8,["type"])]),_:1}),a(v,{label:"健康状况",span:2},{default:t(()=>[u(l(e.value.healthStatus||"健康"),1)]),_:1}),a(v,{label:"救助地点",span:2},{default:t(()=>[u(l(e.value.rescueLocation||"未知"),1)]),_:1}),a(v,{label:"救助日期",span:2},{default:t(()=>[u(l(e.value.rescueDate||"未知"),1)]),_:1})]),_:1}),e.value.tags&&e.value.tags.length?(i(),r("div",Te,[o[1]||(o[1]=s("div",{class:"section-title"},"标签",-1)),s("div",ze,[(i(!0),r(A,null,L(e.value.tags,m=>(i(),h(C,{key:m.id||m.name,type:"info",effect:"plain"},{default:t(()=>[u(l(m.name||m),1)]),_:2},1024))),128))])])):_("",!0),s("div",Ae,[a(n,{type:"primary",size:"large",disabled:e.value.status!=="ADOPTABLE",onClick:P},{default:t(()=>[a(d,null,{default:t(()=>[a(E(de))]),_:1}),u(" "+l(e.value.status==="ADOPTABLE"?"申请领养":"暂不可领养"),1)]),_:1},8,["disabled"]),a(n,{size:"large",onClick:M},{default:t(()=>[a(d,{color:c.value?"#f56c6c":""},{default:t(()=>[(i(),h(x(c.value?"StarFilled":"Star")))]),_:1},8,["color"]),u(" "+l(c.value?"取消喜欢":"喜欢"),1)]),_:1})])])]),_:1})]),_:1}),e.value.description||e.value.rescueStory?(i(),h(G,{key:0,class:"mt-6"},{header:t(()=>[...o[2]||(o[2]=[s("div",{class:"card-header"},[s("span",null,"详细介绍")],-1)])]),default:t(()=>[s("div",Le,[e.value.description?(i(),r("div",xe,[o[3]||(o[3]=s("h3",null,"猫咪描述",-1)),s("p",null,l(e.value.description),1)])):_("",!0),e.value.rescueStory?(i(),r("div",Oe,[o[4]||(o[4]=s("h3",null,"救助故事",-1)),s("p",null,l(e.value.rescueStory),1)])):_("",!0),e.value.character?(i(),r("div",Re,[o[5]||(o[5]=s("h3",null,"性格特点",-1)),s("p",null,l(e.value.character),1)])):_("",!0)])]),_:1})):_("",!0)])):!f.value&&!e.value.id?(i(),h(K,{key:1,description:"猫咪信息不存在","image-size":200},{default:t(()=>[a(n,{type:"primary",onClick:I},{default:t(()=>[...o[6]||(o[6]=[u("返回列表",-1)])]),_:1})]),_:1})):_("",!0)])),[[Q,f.value]])}}},Je=X(Ve,[["__scopeId","data-v-0b3fa625"]]);export{Je as default};
