import{_ as b}from"./index-59OIMCbR.js";/* empty css               *//* empty css                        */import{az as w,r as L,f as M,c as E,B as v,z as n,E as e,C as s,D as c,u as p,G as N,R as l,Y as _,y as g,P,O as h,Q as r,K as I,a5 as R}from"./vue-vendor-UlW9XFxV.js";import{l as V,ab as k,_ as S,B as F,a0 as j,e as $,E as q}from"./element-plus-5e6ZgU0u.js";import{u as G,l as K}from"./cat-CoDgQuJ0.js";import{i as Q,s as T}from"./favorites-RBzN3m0r.js";const Y={class:"cat-image"},H={class:"image-placeholder"},J={class:"image-error"},U={class:"cat-info"},W={class:"cat-name text-ellipsis"},X={class:"cat-meta"},Z={key:0,class:"cat-tags"},tt={key:1,class:"cat-desc text-ellipsis-2"},at={class:"cat-footer flex-between"},et={class:"view-count"},st={__name:"index",props:{cat:{type:Object,required:!0}},setup(t){const a=t,C=w(),o=L(!1);M(()=>{var i,d;o.value=!!((i=a.cat)!=null&&i.isLiked)||Q((d=a.cat)==null?void 0:d.id)});const y=E(()=>({ADOPTABLE:"status-adoptable",ADOPTED:"status-adopted",TREATMENT:"status-treatment",OBSERVATION:"status-observation"})[a.cat.status]||""),A=E(()=>({ADOPTABLE:"可领养",ADOPTED:"已领养",TREATMENT:"治疗中",OBSERVATION:"观察中"})[a.cat.status]||"未知"),B=()=>{C.push(`/cats/${a.cat.id}`)},D=()=>{a.cat.status==="ADOPTABLE"&&C.push(`/adoption/apply/${a.cat.id}`)},O=async()=>{try{o.value?(await G(a.cat.id),o.value=!1,T(a.cat.id,!1),a.cat.likeCount>0&&a.cat.likeCount--):(await K(a.cat.id),o.value=!0,T(a.cat.id,!0),a.cat.likeCount=(a.cat.likeCount||0)+1)}catch{q.error("操作失败")}};return(i,d)=>{const u=V,x=S,m=F,z=$;return n(),v("div",{class:"cat-card",onClick:B},[e("div",Y,[s(x,{src:t.cat.coverImage||"/placeholder-cat.jpg",fit:"cover",alt:t.cat.name,lazy:""},{placeholder:c(()=>[e("div",H,[s(u,{size:40},{default:c(()=>[s(p(k))]),_:1})])]),error:c(()=>[e("div",J,[s(u,{size:40},{default:c(()=>[s(p(k))]),_:1}),d[0]||(d[0]=e("p",null,"暂无图片",-1))])]),_:1},8,["src","alt"]),e("div",{class:N(["status-tag",y.value])},l(A.value),3),e("div",{class:"like-btn",onClick:_(O,["stop"])},[s(u,{size:20,color:o.value?"#f56c6c":"#fff"},{default:c(()=>[(n(),g(P(o.value?"StarFilled":"Star")))]),_:1},8,["color"]),e("span",null,l(t.cat.likeCount||0),1)])]),e("div",U,[e("h3",W,l(t.cat.name),1),e("div",X,[s(m,{size:"small",type:"info"},{default:c(()=>[r(l(t.cat.breed||"中华田园猫"),1)]),_:1}),s(m,{size:"small",type:t.cat.gender===1?"primary":"danger"},{default:c(()=>[r(l(t.cat.gender===1?"公":"母"),1)]),_:1},8,["type"]),s(m,{size:"small"},{default:c(()=>[r(l(t.cat.age||"未知"),1)]),_:1})]),t.cat.tags&&t.cat.tags.length?(n(),v("div",Z,[(n(!0),v(I,null,R(t.cat.tags.slice(0,3),f=>(n(),g(m,{key:f.id||f.name,size:"small",effect:"plain"},{default:c(()=>[r(l(f.name||f),1)]),_:2},1024))),128))])):h("",!0),t.cat.description?(n(),v("p",tt,l(t.cat.description),1)):h("",!0),e("div",at,[e("div",et,[s(u,null,{default:c(()=>[s(p(j))]),_:1}),e("span",null,l(t.cat.viewCount||0),1)]),s(z,{type:"primary",size:"small",disabled:t.cat.status!=="ADOPTABLE",onClick:_(D,["stop"])},{default:c(()=>[r(l(t.cat.status==="ADOPTABLE"?"申请领养":"暂不可领养"),1)]),_:1},8,["disabled"])])])])}}},ut=b(st,[["__scopeId","data-v-d4b8e07f"]]);export{ut as C};
