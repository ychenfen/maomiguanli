import"./index-CjZhQ3nS.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css               *//* empty css                       *//* empty css                        *//* empty css                     */import{r as _,l as T,j,z as c,B as r,R as t,J as l,K as G,I as b,L as J,O as u,P as q,A as d,Q as x,a6 as I,a4 as H,u as z}from"./vue-vendor-L7KxampG.js";import{q as Q,D as W,v as X,F as Y,E as Z,G as $,H as ee,r as te,I as le,J as ae,u as oe,k as se,K as N,e as ne,L as re,M as ie,N as de}from"./element-plus-B9MrEl8w.js";import{g as ue,a as pe}from"./cat-BNSW1wqJ.js";import{C as me}from"./index-BKVCRXr6.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-DtAJ10D1.js";/* empty css                        */const ce={class:"cat-list-page"},ge={class:"filter-section"},fe={class:"container"},ve={class:"cat-list-section container"},be={class:"list-header flex-between"},ye={class:"result-count"},Ee={class:"count"},Ve={key:0,class:"loading-container"},ke={key:3,class:"pagination-container"},Ce={__name:"list",setup(we){const g=_(!1),y=_([]),B=_([]),f=_(0),v=_("time"),o=T({status:"",gender:"",tags:[],keyword:""}),n=T({page:1,size:12}),p=async()=>{g.value=!0;try{const s={page:n.page,size:n.size,...o,sortBy:v.value};o.tags&&o.tags.length>0?s.tags=o.tags.join(","):delete s.tags;const e=await ue(s);e.code===200&&(y.value=e.data.list||[],f.value=e.data.total||0)}catch{Z.error("获取猫咪列表失败")}finally{g.value=!1}},R=async()=>{try{const s=await pe();s.code===200&&(B.value=s.data||[])}catch(s){console.error("获取标签列表失败",s)}},E=()=>{n.page=1,p()},L=()=>{o.status="",o.gender="",o.tags=[],o.keyword="",v.value="time",n.page=1,p()},S=s=>{n.page=s,p(),window.scrollTo({top:0,behavior:"smooth"})},U=s=>{n.size=s,n.page=1,p()};return j(()=>{p(),R()}),(s,e)=>{const i=ae,V=le,m=te,k=se,A=oe,C=ne,D=Q,w=ie,O=W,P=de,F=$,h=ee,K=Y,M=X;return d(),c("div",ce,[e[16]||(e[16]=r("div",{class:"page-header"},[r("div",{class:"container"},[r("h1",null,"猫咪列表"),r("p",null,"找到你心仪的猫咪，给它一个温暖的家")])],-1)),r("div",ge,[r("div",fe,[t(D,{inline:!0,model:o,class:"filter-form"},{default:l(()=>[t(m,{label:"状态"},{default:l(()=>[t(V,{modelValue:o.status,"onUpdate:modelValue":e[0]||(e[0]=a=>o.status=a),placeholder:"全部状态",clearable:""},{default:l(()=>[t(i,{label:"全部",value:""}),t(i,{label:"可领养",value:"ADOPTABLE"}),t(i,{label:"已领养",value:"ADOPTED"}),t(i,{label:"治疗中",value:"TREATMENT"}),t(i,{label:"观察中",value:"OBSERVATION"})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"性别"},{default:l(()=>[t(V,{modelValue:o.gender,"onUpdate:modelValue":e[1]||(e[1]=a=>o.gender=a),placeholder:"全部性别",clearable:""},{default:l(()=>[t(i,{label:"全部",value:""}),t(i,{label:"公猫",value:1}),t(i,{label:"母猫",value:0})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"标签"},{default:l(()=>[t(V,{modelValue:o.tags,"onUpdate:modelValue":e[2]||(e[2]=a=>o.tags=a),placeholder:"选择标签",multiple:"","collapse-tags":"",clearable:""},{default:l(()=>[(d(!0),c(x,null,I(B.value,a=>(d(),b(i,{key:a.id,label:a.name,value:a.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"搜索"},{default:l(()=>[t(A,{modelValue:o.keyword,"onUpdate:modelValue":e[3]||(e[3]=a=>o.keyword=a),placeholder:"搜索猫咪名称",clearable:"",onKeyup:H(E,["enter"])},{prefix:l(()=>[t(k,null,{default:l(()=>[t(z(N))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,null,{default:l(()=>[t(C,{type:"primary",onClick:E},{default:l(()=>[t(k,null,{default:l(()=>[t(z(N))]),_:1}),e[7]||(e[7]=u(" 搜索 ",-1))]),_:1}),t(C,{onClick:L},{default:l(()=>[t(k,null,{default:l(()=>[t(z(re))]),_:1}),e[8]||(e[8]=u(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])])]),r("div",ve,[r("div",be,[r("div",ye,[e[9]||(e[9]=u(" 共找到 ",-1)),r("span",Ee,q(f.value),1),e[10]||(e[10]=u(" 只猫咪 ",-1))]),t(O,{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),onChange:E},{default:l(()=>[t(w,{label:"time"},{default:l(()=>[...e[11]||(e[11]=[u("最新",-1)])]),_:1}),t(w,{label:"views"},{default:l(()=>[...e[12]||(e[12]=[u("最热",-1)])]),_:1}),t(w,{label:"likes"},{default:l(()=>[...e[13]||(e[13]=[u("最多喜欢",-1)])]),_:1})]),_:1},8,["modelValue"])]),g.value?G((d(),c("div",Ve,[...e[14]||(e[14]=[r("p",null,"加载中...",-1)])])),[[M,g.value]]):y.value.length>0?(d(),b(F,{key:1,gutter:24},{default:l(()=>[(d(!0),c(x,null,I(y.value,a=>(d(),b(P,{key:a.id,xs:24,sm:12,md:8,lg:6},{default:l(()=>[t(me,{cat:a,class:"mb-6"},null,8,["cat"])]),_:2},1024))),128))]),_:1})):(d(),b(h,{key:2,description:"暂无猫咪数据","image-size":200},{default:l(()=>[t(C,{type:"primary",onClick:L},{default:l(()=>[...e[15]||(e[15]=[u("重置筛选",-1)])]),_:1})]),_:1})),f.value>0?(d(),c("div",ke,[t(K,{"current-page":n.page,"onUpdate:currentPage":e[5]||(e[5]=a=>n.page=a),"page-size":n.size,"onUpdate:pageSize":e[6]||(e[6]=a=>n.size=a),total:f.value,"page-sizes":[12,24,36,48],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:S,onSizeChange:U},null,8,["current-page","page-size","total"])])):J("",!0)])])}}},je=_e(Ce,[["__scopeId","data-v-6990b052"]]);export{je as default};
