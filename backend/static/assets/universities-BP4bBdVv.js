import{_ as X}from"./index-59OIMCbR.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                     *//* empty css               *//* empty css                *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";import{g as Y,u as j,d as A,a as G,c as J}from"./university-BzVaJqCX.js";import{Y as K,a6 as W,E as y,ar as Z,as as ee,B as le,e as te,y as ae,Q as oe,S as se,T as ne,I as ue,F as ie,R as de,X as re,H as me,a5 as pe}from"./element-plus-5e6ZgU0u.js";import{r as d,o as ce,B as ve,C as e,D as a,z as S,M as fe,E as x,y as ge,Q as m,R as b}from"./vue-vendor-UlW9XFxV.js";import"./utils-Yxd-MeZx.js";const _e={class:"university-admin"},ye={class:"header"},Ve={class:"actions"},be={class:"pager"},Ue={__name:"universities",setup(Ee){const C=d(!1),k=d(!1),w=d([]),z=d(0),c=d({page:1,size:10}),V=d({name:"",status:null}),v=async()=>{C.value=!0;try{const s=await Y({pageNum:c.value.page,pageSize:c.value.size,name:V.value.name||void 0,status:V.value.status??void 0});s.code===200&&(w.value=s.data.records||[],z.value=s.data.total||0)}catch(s){y.error((s==null?void 0:s.message)||"加载失败")}finally{C.value=!1}},R=()=>{c.value.page=1,v()},f=d(!1),U=d(!1),P=d(null),o=d({id:null,name:"",province:"",city:"",district:"",address:"",contactPhone:"",contactEmail:"",website:"",description:"",logoUrl:"",status:1}),T={name:[{required:!0,message:"请输入高校名称",trigger:"blur"}],province:[{required:!0,message:"请输入省份",trigger:"blur"}],city:[{required:!0,message:"请输入城市",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},D=()=>{U.value=!1,o.value={id:null,name:"",province:"",city:"",district:"",address:"",contactPhone:"",contactEmail:"",website:"",description:"",logoUrl:"",status:1},f.value=!0},I=s=>{U.value=!0,o.value={id:s.id,name:s.name,province:s.province,city:s.city,district:s.district||"",address:s.address||"",contactPhone:s.contactPhone||"",contactEmail:s.contactEmail||"",website:s.website||"",description:s.description||"",logoUrl:s.logoUrl||"",status:s.status??1},f.value=!0},$=async()=>{var l,n;if(await((n=(l=P.value)==null?void 0:l.validate)==null?void 0:n.call(l).catch(()=>!1))){k.value=!0;try{U.value?(await G(o.value.id,o.value)).code===200&&(y.success("保存成功"),f.value=!1,v()):(await J(o.value)).code===200&&(y.success("创建成功"),f.value=!1,v())}catch(p){y.error((p==null?void 0:p.message)||"操作失败")}finally{k.value=!1}}},q=async s=>{const l=s.status===1?0:1;try{(await j(s.id,l)).code===200&&(y.success("状态已更新"),v())}catch(n){y.error((n==null?void 0:n.message)||"操作失败")}},M=async s=>{try{await pe.confirm(`确定要删除高校「${s.name}」吗？`,"提示",{type:"warning"}),(await A(s.id)).code===200&&(y.success("已删除"),v())}catch{}};return ce(()=>{v()}),(s,l)=>{const n=ne,p=se,u=ue,g=te,_=ee,N=le,F=Z,h=oe,L=K,i=me,r=re,E=de,Q=ie,H=W,O=ae;return S(),ve("div",_e,[e(L,null,{header:a(()=>[x("div",ye,[l[19]||(l[19]=x("span",null,"高校管理",-1)),x("div",Ve,[e(p,{modelValue:V.value.status,"onUpdate:modelValue":l[0]||(l[0]=t=>V.value.status=t),clearable:"",placeholder:"状态",style:{width:"120px"}},{default:a(()=>[e(n,{label:"启用",value:1}),e(n,{label:"禁用",value:0})]),_:1},8,["modelValue"]),e(u,{modelValue:V.value.name,"onUpdate:modelValue":l[1]||(l[1]=t=>V.value.name=t),placeholder:"高校名称",clearable:"",style:{width:"220px"}},null,8,["modelValue"]),e(g,{type:"primary",onClick:R},{default:a(()=>[...l[17]||(l[17]=[m("查询",-1)])]),_:1}),e(g,{type:"primary",plain:"",onClick:D},{default:a(()=>[...l[18]||(l[18]=[m("新增高校",-1)])]),_:1})])])]),default:a(()=>[fe((S(),ge(F,{data:w.value,style:{width:"100%"}},{default:a(()=>[e(_,{prop:"id",label:"ID",width:"80"}),e(_,{prop:"name",label:"高校名称","min-width":"220"}),e(_,{label:"地区","min-width":"160"},{default:a(({row:t})=>[m(b(t.province)+b(t.city?"·"+t.city:"")+b(t.district?"·"+t.district:""),1)]),_:1}),e(_,{prop:"catCount",label:"猫咪数",width:"90"}),e(_,{prop:"userCount",label:"用户数",width:"90"}),e(_,{label:"状态",width:"120"},{default:a(({row:t})=>[e(N,{type:t.status===1?"success":"info"},{default:a(()=>[m(b(t.statusText||(t.status===1?"启用":"禁用")),1)]),_:2},1032,["type"])]),_:1}),e(_,{label:"操作",width:"260",fixed:"right"},{default:a(({row:t})=>[e(g,{link:"",type:"primary",onClick:B=>I(t)},{default:a(()=>[...l[20]||(l[20]=[m("编辑",-1)])]),_:1},8,["onClick"]),e(g,{link:"",type:"warning",onClick:B=>q(t)},{default:a(()=>[m(b(t.status===1?"禁用":"启用"),1)]),_:2},1032,["onClick"]),e(g,{link:"",type:"danger",onClick:B=>M(t)},{default:a(()=>[...l[21]||(l[21]=[m("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,C.value]]),x("div",be,[e(h,{"current-page":c.value.page,"onUpdate:currentPage":l[2]||(l[2]=t=>c.value.page=t),"page-size":c.value.size,"onUpdate:pageSize":l[3]||(l[3]=t=>c.value.size=t),total:z.value,layout:"total, prev, pager, next",onCurrentChange:v},null,8,["current-page","page-size","total"])])]),_:1}),e(H,{modelValue:f.value,"onUpdate:modelValue":l[16]||(l[16]=t=>f.value=t),title:U.value?"编辑高校":"新增高校",width:"720px"},{footer:a(()=>[e(g,{onClick:l[15]||(l[15]=t=>f.value=!1)},{default:a(()=>[...l[22]||(l[22]=[m("取消",-1)])]),_:1}),e(g,{type:"primary",loading:k.value,onClick:$},{default:a(()=>[...l[23]||(l[23]=[m("确定",-1)])]),_:1},8,["loading"])]),default:a(()=>[e(Q,{ref_key:"formRef",ref:P,model:o.value,rules:T,"label-width":"110px"},{default:a(()=>[e(E,{gutter:16},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(i,{label:"高校名称",prop:"name"},{default:a(()=>[e(u,{modelValue:o.value.name,"onUpdate:modelValue":l[4]||(l[4]=t=>o.value.name=t),maxlength:"60"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:a(()=>[e(i,{label:"状态",prop:"status"},{default:a(()=>[e(p,{modelValue:o.value.status,"onUpdate:modelValue":l[5]||(l[5]=t=>o.value.status=t),style:{width:"100%"}},{default:a(()=>[e(n,{label:"启用",value:1}),e(n,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{gutter:16},{default:a(()=>[e(r,{span:8},{default:a(()=>[e(i,{label:"省份",prop:"province"},{default:a(()=>[e(u,{modelValue:o.value.province,"onUpdate:modelValue":l[6]||(l[6]=t=>o.value.province=t),maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(i,{label:"城市",prop:"city"},{default:a(()=>[e(u,{modelValue:o.value.city,"onUpdate:modelValue":l[7]||(l[7]=t=>o.value.city=t),maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(i,{label:"区域"},{default:a(()=>[e(u,{modelValue:o.value.district,"onUpdate:modelValue":l[8]||(l[8]=t=>o.value.district=t),maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{label:"详细地址"},{default:a(()=>[e(u,{modelValue:o.value.address,"onUpdate:modelValue":l[9]||(l[9]=t=>o.value.address=t),maxlength:"120"},null,8,["modelValue"])]),_:1}),e(E,{gutter:16},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(i,{label:"联系电话"},{default:a(()=>[e(u,{modelValue:o.value.contactPhone,"onUpdate:modelValue":l[10]||(l[10]=t=>o.value.contactPhone=t),maxlength:"30"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:a(()=>[e(i,{label:"联系邮箱"},{default:a(()=>[e(u,{modelValue:o.value.contactEmail,"onUpdate:modelValue":l[11]||(l[11]=t=>o.value.contactEmail=t),maxlength:"60"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{gutter:16},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(i,{label:"官方网站"},{default:a(()=>[e(u,{modelValue:o.value.website,"onUpdate:modelValue":l[12]||(l[12]=t=>o.value.website=t),maxlength:"120"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:a(()=>[e(i,{label:"校徽URL"},{default:a(()=>[e(u,{modelValue:o.value.logoUrl,"onUpdate:modelValue":l[13]||(l[13]=t=>o.value.logoUrl=t),maxlength:"200"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{label:"学校简介"},{default:a(()=>[e(u,{modelValue:o.value.description,"onUpdate:modelValue":l[14]||(l[14]=t=>o.value.description=t),type:"textarea",rows:3,maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Le=X(Ue,[["__scopeId","data-v-1be33ef1"]]);export{Le as default};
