import{_ as j}from"./index-59OIMCbR.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                 *//* empty css               *//* empty css                       *//* empty css                        *//* empty css                     */import{r as _,l as B,o as Q,B as g,E as i,C as t,D as a,M as G,y as b,O as H,Q as u,R as W,z as d,K as x,a5 as L,am as X,u as z}from"./vue-vendor-UlW9XFxV.js";import{F as q,P as J,y as Y,Q as Z,E as $,R as ee,m as te,H as ae,S as le,T as oe,I as se,l as ne,U as S,e as re,V as ie,W as de,X as ue}from"./element-plus-5e6ZgU0u.js";import{g as pe,a as me}from"./cat-CoDgQuJ0.js";import{C as ce}from"./index-BCm8nuFM.js";import"./utils-Yxd-MeZx.js";/* empty css                        */import"./favorites-RBzN3m0r.js";const _e={class:"cat-list-page"},ge={class:"filter-section"},fe={class:"container"},ve={class:"cat-list-section container"},ye={class:"list-header flex-between"},be={class:"result-count"},Ee={class:"count"},ke={key:0,class:"loading-container"},Ve={key:3,class:"pagination-container"},we={__name:"list",setup(Ce){const f=_(!1),E=_([]),I=_([]),v=_(0),y=_("time"),o=B({status:"",gender:"",tagId:null,keyword:""}),r=B({page:1,size:12}),m=async()=>{f.value=!0;try{const n={time:"create_time",views:"view_count",likes:"like_count"},e={pageNum:r.page,pageSize:r.size,status:o.status||void 0,gender:o.gender===""?void 0:o.gender,keyword:o.keyword||void 0,tagId:o.tagId||void 0,sortBy:n[y.value]||"create_time"},s=await pe(e);s.code===200&&(E.value=s.data.records||s.data.list||[],v.value=s.data.total||0)}catch{$.error("获取猫咪列表失败")}finally{f.value=!1}},R=async()=>{try{const n=await me();if(n.code===200&&n.data){const e=n.data,s=[];Object.keys(e).forEach(p=>{Array.isArray(e[p])&&s.push(...e[p])}),I.value=s}}catch(n){console.error("获取标签列表失败",n)}},k=()=>{r.page=1,m()},T=()=>{o.status="",o.gender="",o.tagId=null,o.keyword="",y.value="time",r.page=1,m()},U=n=>{r.page=n,m(),window.scrollTo({top:0,behavior:"smooth"})},A=n=>{r.size=n,r.page=1,m()};return Q(()=>{m(),R()}),(n,e)=>{const s=oe,p=le,c=ae,V=ne,N=se,w=re,O=q,C=de,D=J,P=ue,h=ee,F=te,M=Z,K=Y;return d(),g("div",_e,[e[16]||(e[16]=i("div",{class:"page-header"},[i("div",{class:"container"},[i("h1",null,"猫咪列表"),i("p",null,"找到你心仪的猫咪，给它一个温暖的家")])],-1)),i("div",ge,[i("div",fe,[t(O,{inline:!0,model:o,class:"filter-form"},{default:a(()=>[t(c,{label:"状态"},{default:a(()=>[t(p,{modelValue:o.status,"onUpdate:modelValue":e[0]||(e[0]=l=>o.status=l),placeholder:"全部状态",clearable:""},{default:a(()=>[t(s,{label:"全部",value:""}),t(s,{label:"可领养",value:"ADOPTABLE"}),t(s,{label:"已领养",value:"ADOPTED"}),t(s,{label:"治疗中",value:"TREATMENT"}),t(s,{label:"观察中",value:"OBSERVATION"})]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"性别"},{default:a(()=>[t(p,{modelValue:o.gender,"onUpdate:modelValue":e[1]||(e[1]=l=>o.gender=l),placeholder:"全部性别",clearable:""},{default:a(()=>[t(s,{label:"全部",value:""}),t(s,{label:"公猫",value:1}),t(s,{label:"母猫",value:0})]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"标签"},{default:a(()=>[t(p,{modelValue:o.tagId,"onUpdate:modelValue":e[2]||(e[2]=l=>o.tagId=l),placeholder:"选择标签",clearable:""},{default:a(()=>[(d(!0),g(x,null,L(I.value,l=>(d(),b(s,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"搜索"},{default:a(()=>[t(N,{modelValue:o.keyword,"onUpdate:modelValue":e[3]||(e[3]=l=>o.keyword=l),placeholder:"搜索猫咪名称",clearable:"",onKeyup:X(k,["enter"])},{prefix:a(()=>[t(V,null,{default:a(()=>[t(z(S))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(c,null,{default:a(()=>[t(w,{type:"primary",onClick:k},{default:a(()=>[t(V,null,{default:a(()=>[t(z(S))]),_:1}),e[7]||(e[7]=u(" 搜索 ",-1))]),_:1}),t(w,{onClick:T},{default:a(()=>[t(V,null,{default:a(()=>[t(z(ie))]),_:1}),e[8]||(e[8]=u(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])])]),i("div",ve,[i("div",ye,[i("div",be,[e[9]||(e[9]=u(" 共找到 ",-1)),i("span",Ee,W(v.value),1),e[10]||(e[10]=u(" 只猫咪 ",-1))]),t(D,{modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=l=>y.value=l),onChange:k},{default:a(()=>[t(C,{label:"time"},{default:a(()=>[...e[11]||(e[11]=[u("最新",-1)])]),_:1}),t(C,{label:"views"},{default:a(()=>[...e[12]||(e[12]=[u("最热",-1)])]),_:1}),t(C,{label:"likes"},{default:a(()=>[...e[13]||(e[13]=[u("最多喜欢",-1)])]),_:1})]),_:1},8,["modelValue"])]),f.value?G((d(),g("div",ke,[...e[14]||(e[14]=[i("p",null,"加载中...",-1)])])),[[K,f.value]]):E.value.length>0?(d(),b(h,{key:1,gutter:24},{default:a(()=>[(d(!0),g(x,null,L(E.value,l=>(d(),b(P,{key:l.id,xs:24,sm:12,md:8,lg:6},{default:a(()=>[t(ce,{cat:l,class:"mb-6"},null,8,["cat"])]),_:2},1024))),128))]),_:1})):(d(),b(F,{key:2,description:"暂无猫咪数据","image-size":200},{default:a(()=>[t(w,{type:"primary",onClick:T},{default:a(()=>[...e[15]||(e[15]=[u("重置筛选",-1)])]),_:1})]),_:1})),v.value>0?(d(),g("div",Ve,[t(M,{"current-page":r.page,"onUpdate:currentPage":e[5]||(e[5]=l=>r.page=l),"page-size":r.size,"onUpdate:pageSize":e[6]||(e[6]=l=>r.size=l),total:v.value,"page-sizes":[12,24,36,48],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:U,onSizeChange:A},null,8,["current-page","page-size","total"])])):H("",!0)])])}}},Ke=j(we,[["__scopeId","data-v-b7f6ca14"]]);export{Ke as default};
