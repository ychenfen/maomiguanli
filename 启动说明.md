# 猫咪领养系统 - 启动说明

## 系统架构

本系统采用**前后端分离**架构：
- **后端**：Spring Boot (端口 8080) - 提供API接口
- **前端**：Node.js服务器 (端口 5000) - 提供页面和静态资源

## 环境要求

1. **Java 17+** - 运行后端服务
2. **MySQL 8.0+** - 数据库
3. **Node.js** - 运行前端服务器

## 启动步骤

### 1. 初始化数据库（首次运行）

在Windows命令提示符（cmd）中运行：
```cmd
cd D:\Users\cheng\Desktop\猫咪领养系统-部署包\deploy
init-db.bat
```

按提示输入MySQL用户名和密码。

### 2. 启动后端服务

打开第一个命令提示符窗口：
```cmd
cd D:\Users\cheng\Desktop\猫咪领养系统-部署包\deploy\backend
java -jar cat-rescue.jar --spring.profiles.active=prod
```

等待看到 "Started CatRescueApplication" 提示。

### 3. 启动前端服务

打开第二个命令提示符窗口：
```cmd
cd D:\Users\cheng\Desktop\猫咪领养系统-部署包\deploy\frontend
node server.js
```

看到 "Server running at http://localhost:5000" 提示。

### 4. 访问系统

在浏览器中打开：**http://localhost:5000**

## 访问地址

| 服务 | 地址 | 说明 |
|------|------|------|
| 前端页面 | http://localhost:5000 | 用户访问入口 |
| 后端API | http://localhost:8080/api | API接口 |
| API文档 | http://localhost:8080/doc.html | Swagger文档 |

## 默认账号

| 角色 | 用户名 | 密码 |
|------|--------|------|
| 超级管理员 | admin | 123456 |
| 普通用户 | zhangsan | 123456 |

## 常见问题

### Q: 为什么不能直接访问 http://localhost:8080 ？

A: 由于Spring Security配置限制，后端只开放了特定的API路径。前端必须通过Node.js服务器访问，该服务器会自动代理API请求到后端。

### Q: 页面显示401错误怎么办？

A:
1. 确保前端服务器运行在5000端口
2. 确保后端服务器运行在8080端口
3. 访问 http://localhost:5000 而不是 http://localhost:8080
4. 如果是访问需要登录的功能，请先登录

### Q: 如何停止服务？

A: 在运行服务的命令提示符窗口中按 `Ctrl+C`

## 注意事项

1. **不要使用Git Bash运行bat文件**，请使用Windows命令提示符（cmd）
2. **确保MySQL服务已启动**
3. **确保8080和5000端口未被占用**
4. **首次运行前必须初始化数据库**

## 开发模式

如果需要修改前端代码，建议使用Vite开发服务器：
```bash
cd frontend-source  # 如果有源代码目录
npm install
npm run dev
```

## 生产部署

生产环境建议使用Nginx作为反向代理，统一处理前后端请求。
